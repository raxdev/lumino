{"version":3,"file":"index.es6.js","sources":["../src/bplustree.ts","../src/linkedlist.ts"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\r\n// Distributed under the terms of the Modified BSD License.\r\n/*-----------------------------------------------------------------------------\r\n| Copyright (c) 2014-2018, PhosphorJS Contributors\r\n|\r\n| Distributed under the terms of the BSD 3-Clause License.\r\n| The full license is in the file LICENSE, distributed with this software.\r\n|----------------------------------------------------------------------------*/\r\nimport {\r\n  ArrayExt, IIterable, IIterator, IRetroable, IterableOrArrayLike, each, empty\r\n} from \"@lumino/algorithm\";\r\n\r\n\r\n/**\r\n * A generic B+ tree.\r\n *\r\n * #### Notes\r\n * Most operations have `O(log32 n)` or better complexity.\r\n */\r\nexport\r\nclass BPlusTree<T> implements IIterable<T>, IRetroable<T> {\r\n  /**\r\n   * Construct a new B+ tree.\r\n   *\r\n   * @param cmp - The item comparison function for the tree.\r\n   */\r\n  constructor(cmp: (a: T, b: T) => number) {\r\n    this.cmp = cmp;\r\n  }\r\n\r\n  /**\r\n   * The item comparison function for the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(1)`\r\n   */\r\n  readonly cmp: (a: T, b: T) => number;\r\n\r\n  /**\r\n   * Whether the tree is empty.\r\n   *\r\n   * #### Complexity\r\n   * `O(1)`\r\n   */\r\n  get isEmpty(): boolean {\r\n    return this._root.size === 0;\r\n  }\r\n\r\n  /**\r\n   * The size of the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(1)`\r\n   */\r\n  get size(): number {\r\n    return this._root.size;\r\n  }\r\n\r\n  /**\r\n   * The first item in the tree.\r\n   *\r\n   * This is `undefined` if the tree is empty.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  get first(): T | undefined {\r\n    let node = Private.firstLeaf(this._root);\r\n    return node.size > 0 ? node.items[0] : undefined;\r\n  }\r\n\r\n  /**\r\n   * The last item in the tree.\r\n   *\r\n   * This is `undefined` if the tree is empty.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  get last(): T | undefined {\r\n    let node = Private.lastLeaf(this._root);\r\n    return node.size > 0 ? node.items[node.size - 1] : undefined;\r\n  }\r\n\r\n  /**\r\n   * Create an iterator over the items in the tree.\r\n   *\r\n   * @returns A new iterator starting with the first item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  iter(): IIterator<T> {\r\n    return Private.iterItems(this._root);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator over the items in the tree.\r\n   *\r\n   * @returns A new iterator starting with the last item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  retro(): IIterator<T> {\r\n    return Private.retroItems(this._root);\r\n  }\r\n\r\n  /**\r\n   * Create an iterator for a slice of items in the tree.\r\n   *\r\n   * @param start - The index of the first item, inclusive. This\r\n   *   should be `< stop`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `0`.\r\n   *\r\n   * @param stop - The index of the last item, exclusive. This\r\n   *   should be `> start`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `size`.\r\n   *\r\n   * @returns A new iterator starting with the specified item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  slice(start?: number, stop?: number): IIterator<T> {\r\n    return Private.sliceItems(this._root, start, stop);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator for a slice of items in the tree.\r\n   *\r\n   * @param start - The index of the first item, inclusive. This\r\n   *   should be `> stop`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `size - 1`.\r\n   *\r\n   * @param stop - The index of the last item, exclusive. This\r\n   *   should be `< start`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `-size - 1`.\r\n   *\r\n   * @returns A new reverse iterator starting with the specified item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  retroSlice(start?: number, stop?: number): IIterator<T> {\r\n    return Private.retroSliceItems(this._root, start, stop);\r\n  }\r\n\r\n  /**\r\n   * Get the item at a particular index.\r\n   *\r\n   * @param index - The index of the item of interest. Negative\r\n   *   values are taken as an offset from the end of the tree.\r\n   *\r\n   * @returns The item at the specified index, or `undefined` if\r\n   *   the index is out of range.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  at(index: number): T | undefined {\r\n    return Private.itemAt(this._root, index);\r\n  }\r\n\r\n  /**\r\n   * Test whether the tree has an item which matches a key.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - A function which compares an item against the key.\r\n   *\r\n   * @returns `true` if the tree has an item which matches the given\r\n   *   key, `false` otherwise.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  has<U>(key: U, cmp: (item: T, key: U) => number): boolean {\r\n    return Private.hasItem(this._root, key, cmp);\r\n  }\r\n\r\n  /**\r\n   * Get the index of an item which matches a key.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - A function which compares an item against the key.\r\n   *\r\n   * @returns The index of the item which matches the given key. A\r\n   *   negative value means that a matching item does not exist in\r\n   *   the tree, but if one did it would reside at `-index - 1`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  indexOf<U>(key: U, cmp: (item: T, key: U) => number): number {\r\n    return Private.indexOf(this._root, key, cmp);\r\n  }\r\n\r\n  /**\r\n   * Get the item which matches a key.\r\n   *\r\n   * @param item - The key of interest.\r\n   *\r\n   * @param cmp - A function which compares an item against the key.\r\n   *\r\n   * @returns The item which matches the given key, or `undefined` if\r\n   *   the tree does not have a matching item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  get<U>(key: U, cmp: (item: T, key: U) => number): T | undefined {\r\n    return Private.getItem(this._root, key, cmp);\r\n  }\r\n\r\n  /**\r\n   * Assign new items to the tree, replacing all current items.\r\n   *\r\n   * @param items - The items to assign to the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(n log32 n)`\r\n   */\r\n  assign(items: IterableOrArrayLike<T>): void {\r\n    this.clear();\r\n    this.update(items);\r\n  }\r\n\r\n  /**\r\n   * Insert an item into the tree.\r\n   *\r\n   * @param item - The item of interest.\r\n   *\r\n   * @returns If the given item matches an existing item in the tree,\r\n   *   the given item will replace it, and the existing item will be\r\n   *   returned. Otherwise, this method returns `undefined`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  insert(item: T): T | undefined {\r\n    let existing = Private.insertItem(this._root, item, this.cmp);\r\n    this._root = Private.maybeSplitRoot(this._root);\r\n    return existing;\r\n  }\r\n\r\n  /**\r\n   * Update the tree with multiple items.\r\n   *\r\n   * @param items - The items to insert into the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(k log32 n)`\r\n   */\r\n  update(items: IterableOrArrayLike<T>): void {\r\n    each(items, item => { this.insert(item); });\r\n  }\r\n\r\n  /**\r\n   * Delete an item which matches a particular key.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - A function which compares an item against the key.\r\n   *\r\n   * @returns The item removed from the tree, or `undefined` if no\r\n   *   item matched the given key.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  delete<U>(key: U, cmp: (item: T, key: U) => number): T | undefined {\r\n    let item = Private.deleteItem(this._root, key, cmp);\r\n    this._root = Private.maybeExtractRoot(this._root);\r\n    return item;\r\n  }\r\n\r\n  /**\r\n   * Remove an item at a particular index.\r\n   *\r\n   * @param index - The index of the item to remove. Negative\r\n   *   values are taken as an offset from the end of the tree.\r\n   *\r\n   * @returns The item removed from the tree, or `undefined` if\r\n   *   the given index is out of range.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  remove(index: number): T | undefined {\r\n    let item = Private.removeItem(this._root, index);\r\n    this._root = Private.maybeExtractRoot(this._root);\r\n    return item;\r\n  }\r\n\r\n  /**\r\n   * Clear the contents of the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(n)`\r\n   */\r\n  clear(): void {\r\n    Private.clear(this._root);\r\n    this._root = new Private.LeafNode<T>();\r\n  }\r\n\r\n  private _root: Private.Node<T> = new Private.LeafNode<T>();\r\n}\r\n\r\n\r\n/**\r\n * The namespace for the `BPlusTree` class statics.\r\n */\r\nexport\r\nnamespace BPlusTree {\r\n  /**\r\n   * Create a new B+ tree populated with the given items.\r\n   *\r\n   * @param items - The items to add to the tree.\r\n   *\r\n   * @param cmp - The item comparison function for the tree.\r\n   *\r\n   * @returns A new B+ tree populated with the given items.\r\n   *\r\n   * #### Complexity\r\n   * `O(n log32 n)`\r\n   */\r\n  export\r\n  function from<T>(items: IterableOrArrayLike<T>, cmp: (a: T, b: T) => number): BPlusTree<T> {\r\n    let tree = new BPlusTree<T>(cmp);\r\n    tree.assign(items);\r\n    return tree;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * The namespace for the module implementation details.\r\n */\r\nnamespace Private {\r\n  /**\r\n   * A const enum of the B+ tree node types.\r\n   */\r\n  export\r\n  const enum NodeType { Branch, Leaf }\r\n\r\n  /**\r\n   * A branch node in a B+ tree.\r\n   */\r\n  export\r\n  class BranchNode<T> {\r\n    /**\r\n     * The left-most item of each child subtree.\r\n     */\r\n    readonly items: T[] = [];\r\n\r\n    /**\r\n     * The cumulative sizes of each child subtree.\r\n     */\r\n    readonly sizes: number[] = [];\r\n\r\n    /**\r\n     * The child nodes of this branch node.\r\n     */\r\n    readonly children: Node<T>[] = [];\r\n\r\n    /**\r\n     * The discriminated type of the node.\r\n     */\r\n    get type(): NodeType.Branch {\r\n      return NodeType.Branch;\r\n    }\r\n\r\n    /**\r\n     * The total number of items in the subtree.\r\n     */\r\n    get size(): number {\r\n      return this.sizes[this.sizes.length - 1];\r\n    }\r\n\r\n    /**\r\n     * The tree width of the node.\r\n     */\r\n    get width(): number {\r\n      return this.children.length;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A leaf node in a B+ tree.\r\n   */\r\n  export\r\n  class LeafNode<T> {\r\n    /**\r\n     * The next sibling leaf node of this leaf node.\r\n     */\r\n    next: LeafNode<T> | null = null;\r\n\r\n    /**\r\n     * The previous sibling leaf node of this leaf node.\r\n     */\r\n    prev: LeafNode<T> | null = null;\r\n\r\n    /**\r\n     * The items of the leaf.\r\n     */\r\n    readonly items: T[] = [];\r\n\r\n    /**\r\n     * The discriminated type of the node.\r\n     */\r\n    get type(): NodeType.Leaf {\r\n      return NodeType.Leaf;\r\n    }\r\n\r\n    /**\r\n     * The total number of items in the leaf.\r\n     */\r\n    get size(): number {\r\n      return this.items.length;\r\n    }\r\n\r\n    /**\r\n     * The tree width of the node.\r\n     */\r\n    get width(): number {\r\n      return this.items.length;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A type alias for the B+ tree nodes.\r\n   */\r\n  export\r\n  type Node<T> = BranchNode<T> | LeafNode<T>;\r\n\r\n  /**\r\n   * Get the first leaf node in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns The first leaf node in the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function firstLeaf<T>(node: Node<T>): LeafNode<T> {\r\n    while (node.type === NodeType.Branch) {\r\n      node = node.children[0];\r\n    }\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Get the last leaf node in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns The last leaf node in the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function lastLeaf<T>(node: Node<T>): LeafNode<T> {\r\n    while (node.type === NodeType.Branch) {\r\n      node = node.children[node.children.length - 1];\r\n    }\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Create a forward iterator for the items in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns A new forward iterator starting with the first item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function iterItems<T>(node: Node<T>): IIterator<T> {\r\n    let leaf = firstLeaf(node);\r\n    return new ForwardIterator<T>(leaf, 0, -1);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator for the items in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns A new reverse iterator starting with the last item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function retroItems<T>(node: Node<T>): IIterator<T> {\r\n    let leaf = lastLeaf(node);\r\n    return new RetroIterator<T>(leaf, leaf.size - 1, -1);\r\n  }\r\n\r\n  /**\r\n   * Create an iterator for a slice of items in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param start - The index of the first item, inclusive. This\r\n   *   should be `< stop`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `0`.\r\n   *\r\n   * @param stop - The index of the last item, exclusive. This\r\n   *   should be `> start`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `size`.\r\n   *\r\n   * @returns A new iterator starting with the specified item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function sliceItems<T>(node: Node<T>, start?: number, stop?: number): IIterator<T> {\r\n    // Normalize the start index.\r\n    if (start === undefined) {\r\n      start = 0;\r\n    } else if (start < 0) {\r\n      start = Math.max(0, start + node.size);\r\n    } else {\r\n      start = Math.min(start, node.size);\r\n    }\r\n\r\n    // Normalize the stop index.\r\n    if (stop === undefined) {\r\n      stop = node.size;\r\n    } else if (stop < 0) {\r\n      stop = Math.max(0, stop + node.size);\r\n    } else {\r\n      stop = Math.min(stop, node.size);\r\n    }\r\n\r\n    // Compute effective count.\r\n    let count = Math.max(0, stop - start);\r\n\r\n    // Bail early if there is nothing to iterate.\r\n    if (count === 0) {\r\n      return empty<T>();\r\n    }\r\n\r\n    // Find the starting leaf node and local index.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByIndex(node.sizes, start);\r\n      if (i > 0) start -= node.sizes[i - 1];\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Return the forward iterator for the range.\r\n    return new ForwardIterator<T>(node, start, count);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator for a slice of items in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param start - The index of the first item, inclusive. This\r\n   *   should be `> stop`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `size - 1`.\r\n   *\r\n   * @param stop - The index of the last item, exclusive. This\r\n   *   should be `< start`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `-size - 1`.\r\n   *\r\n   * @returns A new reverse iterator starting with the specified item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function retroSliceItems<T>(node: Node<T>, start?: number, stop?: number): IIterator<T> {\r\n    // Normalize the start index.\r\n    if (start === undefined) {\r\n      start = node.size - 1;\r\n    } else if (start < 0) {\r\n      start = Math.max(-1, start + node.size);\r\n    } else {\r\n      start = Math.min(start, node.size - 1);\r\n    }\r\n\r\n    // Normalize the stop index.\r\n    if (stop === undefined) {\r\n      stop = -1;\r\n    } else if (stop < 0) {\r\n      stop = Math.max(-1, stop + node.size);\r\n    } else {\r\n      stop = Math.min(stop, node.size - 1);\r\n    }\r\n\r\n    // Compute the effective count.\r\n    let count = Math.max(0, start - stop);\r\n\r\n    // Bail early if there is nothing to iterate.\r\n    if (count === 0) {\r\n      return empty<T>();\r\n    }\r\n\r\n    // Find the starting leaf node and local index.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByIndex(node.sizes, start);\r\n      if (i > 0) start -= node.sizes[i - 1];\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Return the retro iterator for the range.\r\n    return new RetroIterator<T>(node, start, count);\r\n  }\r\n\r\n  /**\r\n   * Get the item at the specified index.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param index - The index of the item of interest. Negative\r\n   *   values are taken as an offset from the end of the tree.\r\n   *\r\n   * @returns The item at the specified index, or `undefined` if\r\n   *   the index is out of range.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function itemAt<T>(node: Node<T>, index: number): T | undefined {\r\n    // Wrap negative indices.\r\n    if (index < 0) {\r\n      index += node.size;\r\n    }\r\n\r\n    // Bail early if the index is out of range.\r\n    if (index < 0 || index >= node.size) {\r\n      return undefined;\r\n    }\r\n\r\n    // Find the containing leaf node and local index.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByIndex(node.sizes, index);\r\n      if (i > 0) index -= node.sizes[i - 1];\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Return the item at the specified index.\r\n    return node.items[index];\r\n  }\r\n\r\n  /**\r\n   * Test whether the tree contains an item which matches a key.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - The key comparison function.\r\n   *\r\n   * @returns Whether the tree contains a matching item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function hasItem<T, U>(node: Node<T>, key: U, cmp: (item: T, key: U) => number): boolean {\r\n    // Find the containing leaf node.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByKey(node.items, key, cmp);\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Find the key index.\r\n    let i = findKeyIndex(node.items, key, cmp);\r\n\r\n    // Return whether or not the node contains a matching item.\r\n    return i >= 0;\r\n  }\r\n\r\n  /**\r\n   * Get the index of the item which matches a key.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - The key comparison function.\r\n   *\r\n   * @returns The index of the item which matches the given key. A\r\n   *   negative value means that a matching item does not exist in\r\n   *   the tree, but if one did it would reside at `-index - 1`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function indexOf<T, U>(node: Node<T>, key: U, cmp: (item: T, key: U) => number): number {\r\n    // Set up the global index.\r\n    let index = 0;\r\n\r\n    // Find the containing leaf node and global index.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByKey(node.items, key, cmp);\r\n      if (i > 0) index += node.sizes[i - 1];\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Find the key index.\r\n    let i = findKeyIndex(node.items, key, cmp);\r\n\r\n    // Return the final computed index.\r\n    return i >= 0 ? index + i : -index + i;\r\n  }\r\n\r\n  /**\r\n   * Get the item for a particular key.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - The key comparison function.\r\n   *\r\n   * @returns The item for the specified key, or `undefined` if\r\n   *   the tree does not have a matching item for the key.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function getItem<T, U>(node: Node<T>, key: U, cmp: (item: T, key: U) => number): T | undefined {\r\n    // Find the containing leaf node.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByKey(node.items, key, cmp);\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Find the key index.\r\n    let i = findKeyIndex(node.items, key, cmp);\r\n\r\n    // Return the item for the given key.\r\n    return i >= 0 ? node.items[i] : undefined;\r\n  }\r\n\r\n  /**\r\n   * Insert an item into the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param item - The item of interest.\r\n   *\r\n   * @param cmp - The item comparison function.\r\n   *\r\n   * @returns If the given item matches an existing item in the tree,\r\n   *   the given item will replace it, and the existing item will be\r\n   *   returned. Otherwise, this function returns `undefined`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   *\r\n   * #### Notes\r\n   * The root may be overfull after calling this function.\r\n   */\r\n  export\r\n  function insertItem<T>(node: Node<T>, item: T, cmp: (a: T, b: T) => number): T | undefined {\r\n    // Handle leaf nodes first.\r\n    if (node.type === NodeType.Leaf) {\r\n      // Find the index for the given item.\r\n      let i = findKeyIndex(node.items, item, cmp);\r\n\r\n      // Fetch the existing item and insert the new item.\r\n      let existing: T | undefined;\r\n      if (i >= 0) {\r\n        existing = node.items[i];\r\n        node.items[i] = item;\r\n      } else {\r\n        existing = undefined;\r\n        ArrayExt.insert(node.items, -i - 1, item);\r\n      }\r\n\r\n      // Return the existing item.\r\n      return existing;\r\n    }\r\n\r\n    // Find the pivot index for the insert.\r\n    let i = findPivotIndexByKey(node.items, item, cmp);\r\n\r\n    // Fetch the pivot child.\r\n    let child = node.children[i];\r\n\r\n    // Fetch the current size of the child.\r\n    let prevSize = child.size;\r\n\r\n    // Recursively insert the item into the child.\r\n    let existing = insertItem(child, item, cmp);\r\n\r\n    // Fetch the updated size of the child.\r\n    let currSize = child.size;\r\n\r\n    // Update the item state of the branch.\r\n    node.items[i] = child.items[0];\r\n\r\n    // Bail early if the child size did not change.\r\n    if (prevSize === currSize) {\r\n      return existing;\r\n    }\r\n\r\n    // Split the child if it's overfull.\r\n    if (child.width > MAX_NODE_WIDTH) {\r\n      let next = splitNode(child);\r\n      ArrayExt.insert(node.children, i + 1, next);\r\n      ArrayExt.insert(node.items, i + 1, next.items[0]);\r\n    }\r\n\r\n    // Update the dirty sizes of the branch.\r\n    updateSizes(node, i);\r\n\r\n    // Return the existing item.\r\n    return existing;\r\n  }\r\n\r\n  /**\r\n   * Delete an item in the tree.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - The key comparison function.\r\n   *\r\n   * @returns The deleted item or `undefined`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   *\r\n   * #### Notes\r\n   * The root may be underfull after calling this function.\r\n   */\r\n  export\r\n  function deleteItem<T, U>(node: Node<T>, key: U, cmp: (item: T, key: U) => number): T | undefined {\r\n    // Handle leaf nodes first.\r\n    if (node.type === NodeType.Leaf) {\r\n      // Find the index for the given key.\r\n      let i = findKeyIndex(node.items, key, cmp);\r\n\r\n      // Bail early if the item does not exist.\r\n      if (i < 0) {\r\n        return undefined;\r\n      }\r\n\r\n      // Remove the item at the computed index.\r\n      return ArrayExt.removeAt(node.items, i);\r\n    }\r\n\r\n    // Find the pivot index for the delete.\r\n    let i = findPivotIndexByKey(node.items, key, cmp);\r\n\r\n    // Fetch the pivot child.\r\n    let child = node.children[i];\r\n\r\n    // Fetch the current size of the child.\r\n    let prevSize = child.size;\r\n\r\n    // Recursively remove the item from the child.\r\n    let item = deleteItem(child, key, cmp);\r\n\r\n    // Fetch the updated size of the child.\r\n    let currSize = child.size;\r\n\r\n    // Bail early if the child size did not change.\r\n    if (prevSize === currSize) {\r\n      return item;\r\n    }\r\n\r\n    // Update the item state of the branch.\r\n    node.items[i] = child.items[0];\r\n\r\n    // Join the child if it's underfull.\r\n    if (child.width < MIN_NODE_WIDTH) {\r\n      i = joinChild(node, i);\r\n    }\r\n\r\n    // Update the dirty sizes of the branch.\r\n    updateSizes(node, i);\r\n\r\n    // Return the deleted item.\r\n    return item;\r\n  }\r\n\r\n  /**\r\n   * Remove an item from the tree.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @param index - The index of interest.\r\n   *\r\n   * @returns The removed item or `undefined`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   *\r\n   * #### Notes\r\n   * The root may be underfull after calling this function.\r\n   */\r\n  export\r\n  function removeItem<T>(node: Node<T>, index: number): T | undefined {\r\n    // Wrap negative indices.\r\n    if (index < 0) {\r\n      index += node.size;\r\n    }\r\n\r\n    // Bail early if the index is out of range.\r\n    if (index < 0 || index >= node.size) {\r\n      return undefined;\r\n    }\r\n\r\n    // Handle leaf nodes first.\r\n    if (node.type === NodeType.Leaf) {\r\n      return ArrayExt.removeAt(node.items, index);\r\n    }\r\n\r\n    // Find the pivot index for the remove.\r\n    let i = findPivotIndexByIndex(node.sizes, index);\r\n    if (i > 0) index -= node.sizes[i];\r\n\r\n    // Fetch the pivot child.\r\n    let child = node.children[i];\r\n\r\n    // Recursively remove the item from the child.\r\n    let item = removeItem(child, index);\r\n\r\n    // Update the item state of the branch.\r\n    node.items[i] = child.items[0];\r\n\r\n    // Join the child if it's underfull.\r\n    if (child.width < MIN_NODE_WIDTH) {\r\n      i = joinChild(node, i);\r\n    }\r\n\r\n    // Update the dirty sizes of the branch.\r\n    updateSizes(node, i);\r\n\r\n    // Return the removed item.\r\n    return item;\r\n  }\r\n\r\n  /**\r\n   * Recursively clear the contents of a node.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * #### Complexity\r\n   * `O(n)`\r\n   */\r\n  export\r\n  function clear<T>(node: Node<T>): void {\r\n    if (node.type === NodeType.Branch) {\r\n      each(node.children, clear);\r\n      node.children.length = 0;\r\n      node.sizes.length = 0;\r\n      node.items.length = 0;\r\n    } else {\r\n      node.items.length = 0;\r\n      node.next = null;\r\n      node.prev = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Split a root node and create a new root, if needed.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns The new root node.\r\n   */\r\n  export\r\n  function maybeSplitRoot<T>(node: Node<T>): Node<T> {\r\n    // Bail early if the current root is not overfull.\r\n    if (node.width <= MAX_NODE_WIDTH) {\r\n      return node;\r\n    }\r\n\r\n    // Create a new root branch node.\r\n    let root = new BranchNode<T>();\r\n\r\n    // Split the node to the right and create a new sibling.\r\n    let next = splitNode(node);\r\n\r\n    // Add the sizes to the root.\r\n    root.sizes[0] = node.size;\r\n    root.sizes[1] = node.size + next.size;\r\n\r\n    // Add the children to the root.\r\n    root.children[0] = node;\r\n    root.children[1] = next;\r\n\r\n    // Add the items to the root.\r\n    root.items[0] = node.items[0];\r\n    root.items[1] = next.items[0];\r\n\r\n    // Return the new root node.\r\n    return root;\r\n  }\r\n\r\n  /**\r\n   * Extract a single node child as a new root, if needed.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns The new root node.\r\n   */\r\n  export\r\n  function maybeExtractRoot<T>(node: Node<T>): Node<T> {\r\n    // Bail early if the node it already a leaf.\r\n    if (node.type === NodeType.Leaf) {\r\n      return node;\r\n    }\r\n\r\n    // Bail early if the branch has more than one child.\r\n    if (node.children.length > 1) {\r\n      return node;\r\n    }\r\n\r\n    // Extract the sole remaining child as the new root.\r\n    let root = node.children.pop()!;\r\n\r\n    // Clear the rest of the node state.\r\n    clear(node);\r\n\r\n    // Return the new root.\r\n    return root;\r\n  }\r\n\r\n  /**\r\n   * The maximum width for a node in the tree.\r\n   */\r\n  const MAX_NODE_WIDTH = 32;\r\n\r\n  /**\r\n   * The minimum width for a node in the tree.\r\n   */\r\n  const MIN_NODE_WIDTH = MAX_NODE_WIDTH >> 1;\r\n\r\n  /**\r\n   * A forward iterator for a B+ tree.\r\n   */\r\n  class ForwardIterator<T> implements IIterator<T> {\r\n    /**\r\n     * Construct a new forward iterator.\r\n     *\r\n     * @param node - The first leaf node in the chain.\r\n     *\r\n     * @param index - The local index of the first item.\r\n     *\r\n     * @param count - The number of items to iterate. A value `< 0`\r\n     *   will iterate all available items.\r\n     */\r\n    constructor(node: LeafNode<T> | null, index: number, count: number) {\r\n      this._node = node;\r\n      this._index = index;\r\n      this._count = count;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<T> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<T> {\r\n      return new ForwardIterator<T>(this._node, this._index, this._count);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): T | undefined {\r\n      if (this._node === null || this._count === 0) {\r\n        return undefined;\r\n      }\r\n      if (this._index >= this._node.size) {\r\n        this._node = this._node.next;\r\n        this._index = 0;\r\n        return this.next();\r\n      }\r\n      if (this._count > 0) {\r\n        this._count--;\r\n      }\r\n      return this._node.items[this._index++];\r\n    }\r\n\r\n    private _index: number;\r\n    private _count: number;\r\n    private _node: LeafNode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * A reverse iterator for a B+ tree.\r\n   */\r\n  class RetroIterator<T> implements IIterator<T> {\r\n    /**\r\n     * Construct a new retro iterator.\r\n     *\r\n     * @param node - The last leaf node in the chain.\r\n     *\r\n     * @param index - The local index of the last item.\r\n     *\r\n     * @param count - The number of items to iterate. A value `< 0`\r\n     *   will iterate all available items.\r\n     */\r\n    constructor(node: LeafNode<T> | null, index: number, count: number) {\r\n      this._node = node;\r\n      this._index = index;\r\n      this._count = count;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<T> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<T> {\r\n      return new RetroIterator<T>(this._node, this._index, this._count);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): T | undefined {\r\n      if (this._node === null || this._count === 0) {\r\n        return undefined;\r\n      }\r\n      if (this._index >= this._node.size) {\r\n        this._index = this._node.size - 1;\r\n      }\r\n      if (this._index < 0) {\r\n        this._node = this._node.prev;\r\n        this._index = this._node ? this._node.size - 1 : -1;\r\n        return this.next();\r\n      }\r\n      if (this._count > 0) {\r\n        this._count--;\r\n      }\r\n      return this._node.items[this._index--];\r\n    }\r\n\r\n    private _index: number;\r\n    private _count: number;\r\n    private _node: LeafNode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * Find the pivot index for a particular local index.\r\n   */\r\n  function findPivotIndexByIndex(sizes: number[], index: number): number {\r\n    let n = sizes.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      if (sizes[i] > index) {\r\n        return i;\r\n      }\r\n    }\r\n    return n - 1;\r\n  }\r\n\r\n  /**\r\n   * Find the pivot index for a particular key.\r\n   */\r\n  function findPivotIndexByKey<T, U>(items: T[], key: U, cmp: (item: T, key: U) => number): number {\r\n    let n = items.length;\r\n    for (let i = 1; i < n; ++i) {\r\n      if (cmp(items[i], key) > 0) {\r\n        return i - 1;\r\n      }\r\n    }\r\n    return n - 1;\r\n  }\r\n\r\n  /**\r\n   * Find the key index for a particular key.\r\n   */\r\n  function findKeyIndex<T, U>(items: T[], key: U, cmp: (item: T, key: U) => number): number {\r\n    let n = items.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      let c = cmp(items[i], key);\r\n      if (c === 0) {\r\n        return i;\r\n      }\r\n      if (c > 0) {\r\n        return -i - 1;\r\n      }\r\n    }\r\n    return -n - 1;\r\n  }\r\n\r\n  /**\r\n   * Update the sizes of a branch node starting at the given index.\r\n   */\r\n  function updateSizes<T>(node: BranchNode<T>, i: number): void {\r\n    let { sizes, children } = node;\r\n    let last = i > 0 ? sizes[i - 1] : 0;\r\n    for (let n = children.length; i < n; ++i) {\r\n      last = sizes[i] = last + children[i].size;\r\n    }\r\n    sizes.length = children.length;\r\n  }\r\n\r\n  /**\r\n   * Split a node and return its new next sibling.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @returns The new next sibling node.\r\n   */\r\n  function splitNode<T>(node: Node<T>): Node<T> {\r\n    // Handle leaf nodes first.\r\n    if (node.type === NodeType.Leaf) {\r\n      // Create the new sibling leaf node.\r\n      let next = new LeafNode<T>();\r\n\r\n      // Move the items to the new sibling.\r\n      let v1 = node.items;\r\n      let v2 = next.items;\r\n      for (let i = MIN_NODE_WIDTH, n = v1.length; i < n; ++i) {\r\n        v2.push(v1[i]);\r\n      }\r\n      v1.length = MIN_NODE_WIDTH;\r\n\r\n      // Patch up the sibling links.\r\n      if (node.next) node.next.prev = next;\r\n      next.next = node.next;\r\n      next.prev = node;\r\n      node.next = next;\r\n\r\n      // Return the new next sibling.\r\n      return next;\r\n    }\r\n\r\n    // Create the new sibling branch node.\r\n    let next = new BranchNode<T>();\r\n\r\n    // Move the children to the new sibling.\r\n    let c1 = node.children;\r\n    let c2 = next.children;\r\n    for (let i = MIN_NODE_WIDTH, n = c1.length; i < n; ++i) {\r\n      c2.push(c1[i]);\r\n    }\r\n    c1.length = MIN_NODE_WIDTH;\r\n\r\n    // Move the items to the new sibling.\r\n    let v1 = node.items;\r\n    let v2 = next.items;\r\n    for (let i = MIN_NODE_WIDTH, n = v1.length; i < n; ++i) {\r\n      v2.push(v1[i]);\r\n    }\r\n    v1.length = MIN_NODE_WIDTH;\r\n\r\n    // Update the dirty sizes of the nodes.\r\n    updateSizes(node, MIN_NODE_WIDTH);\r\n    updateSizes(next, 0);\r\n\r\n    // Return the new next sibling.\r\n    return next;\r\n  }\r\n\r\n  /**\r\n   * Join a child node of a branch with one of its siblings.\r\n   *\r\n   * @param node - The branch node of interest.\r\n   *\r\n   * @param i - The index of the child node of interest.\r\n   *\r\n   * @returns The first modified index.\r\n   *\r\n   * #### Notes\r\n   * This may cause the branch to become underfull.\r\n   */\r\n  function joinChild<T>(node: BranchNode<T>, i: number): number {\r\n    // Fetch the child to be joined.\r\n    let child = node.children[i];\r\n\r\n    // Fetch the relevant sibling.\r\n    let sibling = i === 0 ? node.children[i + 1] : node.children[i - 1];\r\n\r\n    // Compute the flags which control the join behavior.\r\n    let hasNext = i === 0;\r\n    let isLeaf = child.type === NodeType.Leaf;\r\n    let hasExtra = sibling.width > MIN_NODE_WIDTH;\r\n\r\n    // Join case #1: steal from next sibling leaf\r\n    if (isLeaf && hasExtra && hasNext) {\r\n      // Cast the children as leaves.\r\n      let c = child as LeafNode<T>;\r\n      let s = sibling as LeafNode<T>;\r\n\r\n      // Steal an item.\r\n      c.items.push(s.items.shift()!);\r\n\r\n      // Update the branch items.\r\n      node.items[i + 1] = s.items[0];\r\n\r\n      // Return the first modified index.\r\n      return i;\r\n    }\r\n\r\n    // Join case #2: steal from previous sibling leaf\r\n    if (isLeaf && hasExtra && !hasNext) {\r\n      // Cast the children as leaves.\r\n      let c = child as LeafNode<T>;\r\n      let s = sibling as LeafNode<T>;\r\n\r\n      // Steal an item.\r\n      c.items.unshift(s.items.pop()!);\r\n\r\n      // Update the branch items.\r\n      node.items[i] = c.items[0];\r\n\r\n      // Return the first modified index.\r\n      return i - 1;\r\n    }\r\n\r\n    // Join case #3: merge with next sibling leaf\r\n    if (isLeaf && !hasExtra && hasNext) {\r\n      // Cast the children as leaves.\r\n      let c = child as LeafNode<T>;\r\n      let s = sibling as LeafNode<T>;\r\n\r\n      // Merge items.\r\n      s.items.unshift(...c.items);\r\n\r\n      // Remove the old branch child.\r\n      ArrayExt.removeAt(node.children, i);\r\n\r\n      // Remove the stale branch item.\r\n      ArrayExt.removeAt(node.items, i + 1);\r\n\r\n      // Patch up the sibling links.\r\n      if (c.prev) c.prev.next = s;\r\n      s.prev = c.prev;\r\n\r\n      // Clear the original child.\r\n      clear(c);\r\n\r\n      // Return the first modified index.\r\n      return i;\r\n    }\r\n\r\n    // Join case #4: merge with previous sibling leaf\r\n    if (isLeaf && !hasExtra && !hasNext) {\r\n      // Cast the children as leaves.\r\n      let c = child as LeafNode<T>;\r\n      let s = sibling as LeafNode<T>;\r\n\r\n      // Merge items.\r\n      s.items.push(...c.items);\r\n\r\n      // Remove the old branch child.\r\n      ArrayExt.removeAt(node.children, i);\r\n\r\n      // Remove the stale branch item.\r\n      ArrayExt.removeAt(node.items, i);\r\n\r\n      // Patch up the sibling links.\r\n      if (c.next) c.next.prev = s;\r\n      s.next = c.next;\r\n\r\n      // Clear the original child.\r\n      clear(c);\r\n\r\n      // Return the first modified index.\r\n      return i - 1;\r\n    }\r\n\r\n    // Join case #5: steal from next sibling branch\r\n    if (!isLeaf && hasExtra && hasNext) {\r\n      // Cast the children to branches.\r\n      let c = child as BranchNode<T>;\r\n      let s = sibling as BranchNode<T>;\r\n\r\n      // Steal a child from the next sibling.\r\n      c.children.push(s.children.shift()!);\r\n\r\n      // Steal an item from the next sibling.\r\n      c.items.push(s.items.shift()!);\r\n\r\n      // Update the branch items.\r\n      node.items[i + 1] = s.items[0];\r\n\r\n      // Update the sibling sizes.\r\n      updateSizes(c, c.width - 1);\r\n      updateSizes(s, 0);\r\n\r\n      // Return the first modified index.\r\n      return i;\r\n    }\r\n\r\n    // Join case #6: steal from previous sibling branch\r\n    if (!isLeaf && hasExtra && !hasNext) {\r\n      // Cast the children to branches.\r\n      let c = child as BranchNode<T>;\r\n      let s = sibling as BranchNode<T>;\r\n\r\n      // Steal a child from the previous sibling.\r\n      c.children.unshift(s.children.pop()!);\r\n\r\n      // Steal an item from the previous sibling.\r\n      c.items.unshift(s.items.pop()!);\r\n\r\n      // Update the branch items.\r\n      node.items[i] = c.items[0];\r\n\r\n      // Update the sibling sizes.\r\n      updateSizes(c, 0);\r\n      updateSizes(s, s.width - 1);\r\n\r\n      // Return the first modified index.\r\n      return i - 1;\r\n    }\r\n\r\n    // Join case #7: merge with next sibling branch\r\n    if (!isLeaf && !hasExtra && hasNext) {\r\n      // Cast the children to branches.\r\n      let c = child as BranchNode<T>;\r\n      let s = sibling as BranchNode<T>;\r\n\r\n      // Merge the children with the next sibling.\r\n      s.children.unshift(...c.children);\r\n\r\n      // Merge the items with the next sibling.\r\n      s.items.unshift(...c.items);\r\n\r\n      // Remove the old branch child.\r\n      ArrayExt.removeAt(node.children, i);\r\n\r\n      // Remove the stale branch item.\r\n      ArrayExt.removeAt(node.items, i + 1);\r\n\r\n      // Update the sibling sizes.\r\n      updateSizes(s, 0);\r\n\r\n      // Clear the original child but, not its children.\r\n      c.children.length = 0;\r\n      clear(c);\r\n\r\n      // Return the first modified index.\r\n      return i;\r\n    }\r\n\r\n    // Join case #8: merge with previous sibling branch\r\n    if (!isLeaf && !hasExtra && !hasNext) {\r\n      // Cast the children to branches.\r\n      let c = child as BranchNode<T>;\r\n      let s = sibling as BranchNode<T>;\r\n\r\n      // Merge the children with the previous sibling.\r\n      s.children.push(...c.children);\r\n\r\n      // Merge the items with the previous sibling.\r\n      s.items.push(...c.items);\r\n\r\n      // Remove the old branch child.\r\n      ArrayExt.removeAt(node.children, i);\r\n\r\n      // Remove the stale branch item.\r\n      ArrayExt.removeAt(node.items, i);\r\n\r\n      // Update the sibling sizes.\r\n      updateSizes(s, 0);\r\n\r\n      // Clear the original child, but not its children.\r\n      c.children.length = 0;\r\n      clear(c);\r\n\r\n      // Return the first modified index.\r\n      return i - 1;\r\n    }\r\n\r\n    // One of the above cases must match.\r\n    throw 'unreachable';\r\n  }\r\n}\r\n","// Copyright (c) Jupyter Development Team.\r\n// Distributed under the terms of the Modified BSD License.\r\n/*-----------------------------------------------------------------------------\r\n| Copyright (c) 2014-2017, PhosphorJS Contributors\r\n|\r\n| Distributed under the terms of the BSD 3-Clause License.\r\n|\r\n| The full license is in the file LICENSE, distributed with this software.\r\n|----------------------------------------------------------------------------*/\r\nimport {\r\n  IIterable, IIterator, IRetroable, IterableOrArrayLike, each\r\n} from '@lumino/algorithm';\r\n\r\n\r\n/**\r\n * A generic doubly-linked list.\r\n */\r\nexport\r\nclass LinkedList<T> implements IIterable<T>, IRetroable<T> {\r\n  /**\r\n   * Construct a new linked list.\r\n   */\r\n  constructor() { }\r\n\r\n  /**\r\n   * Whether the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get isEmpty(): boolean {\r\n    return this._size === 0;\r\n  }\r\n\r\n  /**\r\n   * The size of the list.\r\n   *\r\n   * #### Complexity\r\n   * `O(1)`\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `length`.\r\n   */\r\n  get size(): number {\r\n    return this._size;\r\n  }\r\n\r\n  /**\r\n   * The length of the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `size`.\r\n   *\r\n   * This property is deprecated.\r\n   */\r\n  get length(): number {\r\n    return this._size;\r\n  }\r\n\r\n  /**\r\n   * The first value in the list.\r\n   *\r\n   * This is `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get first(): T | undefined {\r\n    return this._first ? this._first.value : undefined;\r\n  }\r\n\r\n  /**\r\n   * The last value in the list.\r\n   *\r\n   * This is `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get last(): T | undefined {\r\n    return this._last ? this._last.value : undefined;\r\n  }\r\n\r\n  /**\r\n   * The first node in the list.\r\n   *\r\n   * This is `null` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get firstNode(): LinkedList.INode<T> | null {\r\n    return this._first;\r\n  }\r\n\r\n  /**\r\n   * The last node in the list.\r\n   *\r\n   * This is `null` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get lastNode(): LinkedList.INode<T> | null {\r\n    return this._last;\r\n  }\r\n\r\n  /**\r\n   * Create an iterator over the values in the list.\r\n   *\r\n   * @returns A new iterator starting with the first value.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  iter(): IIterator<T> {\r\n    return new LinkedList.ForwardValueIterator<T>(this._first);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator over the values in the list.\r\n   *\r\n   * @returns A new iterator starting with the last value.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  retro(): IIterator<T> {\r\n    return new LinkedList.RetroValueIterator<T>(this._last);\r\n  }\r\n\r\n  /**\r\n   * Create an iterator over the nodes in the list.\r\n   *\r\n   * @returns A new iterator starting with the first node.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  nodes(): IIterator<LinkedList.INode<T>> {\r\n    return new LinkedList.ForwardNodeIterator<T>(this._first);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator over the nodes in the list.\r\n   *\r\n   * @returns A new iterator starting with the last node.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  retroNodes(): IIterator<LinkedList.INode<T>> {\r\n    return new LinkedList.RetroNodeIterator<T>(this._last);\r\n  }\r\n\r\n  /**\r\n   * Assign new values to the list, replacing all current values.\r\n   *\r\n   * @param values - The values to assign to the list.\r\n   *\r\n   * #### Complexity\r\n   * Linear.\r\n   */\r\n  assign(values: IterableOrArrayLike<T>): void {\r\n    this.clear();\r\n    each(values, value => { this.addLast(value); });\r\n  }\r\n\r\n  /**\r\n   * Add a value to the end of the list.\r\n   *\r\n   * @param value - The value to add to the end of the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `addLast`.\r\n   */\r\n  push(value: T): void {\r\n    this.addLast(value);\r\n  }\r\n\r\n  /**\r\n   * Remove and return the value at the end of the list.\r\n   *\r\n   * @returns The removed value, or `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `removeLast`.\r\n   */\r\n  pop(): T | undefined {\r\n    return this.removeLast();\r\n  }\r\n\r\n  /**\r\n   * Add a value to the beginning of the list.\r\n   *\r\n   * @param value - The value to add to the beginning of the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `addFirst`.\r\n   */\r\n  shift(value: T): void {\r\n    this.addFirst(value);\r\n  }\r\n\r\n  /**\r\n   * Remove and return the value at the beginning of the list.\r\n   *\r\n   * @returns The removed value, or `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `removeFirst`.\r\n   */\r\n  unshift(): T | undefined {\r\n    return this.removeFirst();\r\n  }\r\n\r\n  /**\r\n   * Add a value to the beginning of the list.\r\n   *\r\n   * @param value - The value to add to the beginning of the list.\r\n   *\r\n   * @returns The list node which holds the value.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  addFirst(value: T): LinkedList.INode<T> {\r\n    let node = new Private.LinkedListNode<T>(this, value);\r\n    if (!this._first) {\r\n      this._first = node;\r\n      this._last = node;\r\n    } else {\r\n      node.next = this._first;\r\n      this._first.prev = node;\r\n      this._first = node;\r\n    }\r\n    this._size++;\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Add a value to the end of the list.\r\n   *\r\n   * @param value - The value to add to the end of the list.\r\n   *\r\n   * @returns The list node which holds the value.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  addLast(value: T): LinkedList.INode<T> {\r\n    let node = new Private.LinkedListNode<T>(this, value);\r\n    if (!this._last) {\r\n      this._first = node;\r\n      this._last = node;\r\n    } else {\r\n      node.prev = this._last;\r\n      this._last.next = node;\r\n      this._last = node;\r\n    }\r\n    this._size++;\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Insert a value before a specific node in the list.\r\n   *\r\n   * @param value - The value to insert before the reference node.\r\n   *\r\n   * @param ref - The reference node of interest. If this is `null`,\r\n   *   the value will be added to the beginning of the list.\r\n   *\r\n   * @returns The list node which holds the value.\r\n   *\r\n   * #### Notes\r\n   * The reference node must be owned by the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  insertBefore(value: T, ref: LinkedList.INode<T> | null): LinkedList.INode<T> {\r\n    if (!ref || ref === this._first) {\r\n      return this.addFirst(value);\r\n    }\r\n    if (!(ref instanceof Private.LinkedListNode) || ref.list !== this) {\r\n      throw new Error('Reference node is not owned by the list.');\r\n    }\r\n    let node = new Private.LinkedListNode<T>(this, value);\r\n    let _ref = ref as Private.LinkedListNode<T>;\r\n    let prev = _ref.prev!;\r\n    node.next = _ref;\r\n    node.prev = prev;\r\n    _ref.prev = node;\r\n    prev.next = node;\r\n    this._size++;\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Insert a value after a specific node in the list.\r\n   *\r\n   * @param value - The value to insert after the reference node.\r\n   *\r\n   * @param ref - The reference node of interest. If this is `null`,\r\n   *   the value will be added to the end of the list.\r\n   *\r\n   * @returns The list node which holds the value.\r\n   *\r\n   * #### Notes\r\n   * The reference node must be owned by the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  insertAfter(value: T, ref: LinkedList.INode<T> | null): LinkedList.INode<T> {\r\n    if (!ref || ref === this._last) {\r\n      return this.addLast(value);\r\n    }\r\n    if (!(ref instanceof Private.LinkedListNode) || ref.list !== this) {\r\n      throw new Error('Reference node is not owned by the list.');\r\n    }\r\n    let node = new Private.LinkedListNode<T>(this, value);\r\n    let _ref = ref as Private.LinkedListNode<T>;\r\n    let next = _ref.next!;\r\n    node.next = next;\r\n    node.prev = _ref;\r\n    _ref.next = node;\r\n    next.prev = node;\r\n    this._size++;\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Remove and return the value at the beginning of the list.\r\n   *\r\n   * @returns The removed value, or `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  removeFirst(): T | undefined {\r\n    let node = this._first;\r\n    if (!node) {\r\n      return undefined;\r\n    }\r\n    if (node === this._last) {\r\n      this._first = null;\r\n      this._last = null;\r\n    } else {\r\n      this._first = node.next;\r\n      this._first!.prev = null;\r\n    }\r\n    node.list = null;\r\n    node.next = null;\r\n    node.prev = null;\r\n    this._size--;\r\n    return node.value;\r\n  }\r\n\r\n  /**\r\n   * Remove and return the value at the end of the list.\r\n   *\r\n   * @returns The removed value, or `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  removeLast(): T | undefined {\r\n    let node = this._last;\r\n    if (!node) {\r\n      return undefined;\r\n    }\r\n    if (node === this._first) {\r\n      this._first = null;\r\n      this._last = null;\r\n    } else {\r\n      this._last = node.prev;\r\n      this._last!.next = null;\r\n    }\r\n    node.list = null;\r\n    node.next = null;\r\n    node.prev = null;\r\n    this._size--;\r\n    return node.value;\r\n  }\r\n\r\n  /**\r\n   * Remove a specific node from the list.\r\n   *\r\n   * @param node - The node to remove from the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * The node must be owned by the list.\r\n   */\r\n  removeNode(node: LinkedList.INode<T>): void {\r\n    if (!(node instanceof Private.LinkedListNode) || node.list !== this) {\r\n      throw new Error('Node is not owned by the list.');\r\n    }\r\n    let _node = node as Private.LinkedListNode<T>;\r\n    if (_node === this._first && _node === this._last) {\r\n      this._first = null;\r\n      this._last = null;\r\n    } else if (_node === this._first) {\r\n      this._first = _node.next;\r\n      this._first!.prev = null;\r\n    } else if (_node === this._last) {\r\n      this._last = _node.prev;\r\n      this._last!.next = null;\r\n    } else {\r\n      _node.next!.prev = _node.prev;\r\n      _node.prev!.next = _node.next;\r\n    }\r\n    _node.list = null;\r\n    _node.next = null;\r\n    _node.prev = null;\r\n    this._size--;\r\n  }\r\n\r\n  /**\r\n   * Remove all values from the list.\r\n   *\r\n   * #### Complexity\r\n   * Linear.\r\n   */\r\n  clear(): void {\r\n    let node = this._first;\r\n    while (node) {\r\n      let next = node.next;\r\n      node.list = null;\r\n      node.prev = null;\r\n      node.next = null;\r\n      node = next;\r\n    }\r\n    this._first = null;\r\n    this._last = null;\r\n    this._size = 0;\r\n  }\r\n\r\n  private _first: Private.LinkedListNode<T> | null = null;\r\n  private _last: Private.LinkedListNode<T> | null = null;\r\n  private _size = 0;\r\n}\r\n\r\n\r\n/**\r\n * The namespace for the `LinkedList` class statics.\r\n */\r\nexport\r\nnamespace LinkedList {\r\n  /**\r\n   * An object which represents a node in a linked list.\r\n   *\r\n   * #### Notes\r\n   * User code will not create linked list nodes directly. Nodes\r\n   * are created automatically when values are added to a list.\r\n   */\r\n  export\r\n  interface INode<T> {\r\n    /**\r\n     * The linked list which created and owns the node.\r\n     *\r\n     * This will be `null` when the node is removed from the list.\r\n     */\r\n    readonly list: LinkedList<T> | null;\r\n\r\n    /**\r\n     * The next node in the list.\r\n     *\r\n     * This will be `null` when the node is the last node in the list\r\n     * or when the node is removed from the list.\r\n     */\r\n    readonly next: INode<T> | null;\r\n\r\n    /**\r\n     * The previous node in the list.\r\n     *\r\n     * This will be `null` when the node is the first node in the list\r\n     * or when the node is removed from the list.\r\n     */\r\n    readonly prev: INode<T> | null;\r\n\r\n    /**\r\n     * The user value stored in the node.\r\n     */\r\n    readonly value: T;\r\n  }\r\n\r\n  /**\r\n   * Create a linked list from an iterable of values.\r\n   *\r\n   * @param values - The iterable or array-like object of interest.\r\n   *\r\n   * @returns A new linked list initialized with the given values.\r\n   *\r\n   * #### Complexity\r\n   * Linear.\r\n   */\r\n  export\r\n  function from<T>(values: IterableOrArrayLike<T>): LinkedList<T> {\r\n    let list = new LinkedList<T>();\r\n    list.assign(values);\r\n    return list;\r\n  }\r\n\r\n  /**\r\n   * A forward iterator for values in a linked list.\r\n   */\r\n  export\r\n  class ForwardValueIterator<T> implements IIterator<T> {\r\n    /**\r\n     * Construct a forward value iterator.\r\n     *\r\n     * @param node - The first node in the list.\r\n     */\r\n    constructor(node: INode<T> | null) {\r\n      this._node = node;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<T> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<T> {\r\n      return new ForwardValueIterator<T>(this._node);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): T | undefined {\r\n      if (!this._node) {\r\n        return undefined;\r\n      }\r\n      let node = this._node;\r\n      this._node = node.next;\r\n      return node.value;\r\n    }\r\n\r\n    private _node: INode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * A reverse iterator for values in a linked list.\r\n   */\r\n  export\r\n  class RetroValueIterator<T> implements IIterator<T> {\r\n    /**\r\n     * Construct a retro value iterator.\r\n     *\r\n     * @param node - The last node in the list.\r\n     */\r\n    constructor(node: INode<T> | null) {\r\n      this._node = node;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<T> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<T> {\r\n      return new RetroValueIterator<T>(this._node);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): T | undefined {\r\n      if (!this._node) {\r\n        return undefined;\r\n      }\r\n      let node = this._node;\r\n      this._node = node.prev;\r\n      return node.value;\r\n    }\r\n\r\n    private _node: INode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * A forward iterator for nodes in a linked list.\r\n   */\r\n  export\r\n  class ForwardNodeIterator<T> implements IIterator<INode<T>> {\r\n    /**\r\n     * Construct a forward node iterator.\r\n     *\r\n     * @param node - The first node in the list.\r\n     */\r\n    constructor(node: INode<T> | null) {\r\n      this._node = node;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<INode<T>> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<INode<T>> {\r\n      return new ForwardNodeIterator<T>(this._node);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): INode<T> | undefined {\r\n      if (!this._node) {\r\n        return undefined;\r\n      }\r\n      let node = this._node;\r\n      this._node = node.next;\r\n      return node;\r\n    }\r\n\r\n    private _node: INode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * A reverse iterator for nodes in a linked list.\r\n   */\r\n  export\r\n  class RetroNodeIterator<T> implements IIterator<INode<T>> {\r\n    /**\r\n     * Construct a retro node iterator.\r\n     *\r\n     * @param node - The last node in the list.\r\n     */\r\n    constructor(node: INode<T> | null) {\r\n      this._node = node;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<INode<T>> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<INode<T>> {\r\n      return new RetroNodeIterator<T>(this._node);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): INode<T> | undefined {\r\n      if (!this._node) {\r\n        return undefined;\r\n      }\r\n      let node = this._node;\r\n      this._node = node.prev;\r\n      return node;\r\n    }\r\n\r\n    private _node: INode<T> | null;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * The namespace for the module implementation details.\r\n */\r\nnamespace Private {\r\n  /**\r\n   * The internal linked list node implementation.\r\n   */\r\n  export\r\n  class LinkedListNode<T> {\r\n    /**\r\n     * The linked list which created and owns the node.\r\n     */\r\n    list: LinkedList<T> | null = null;\r\n\r\n    /**\r\n     * The next node in the list.\r\n     */\r\n    next: LinkedListNode<T> | null = null;\r\n\r\n    /**\r\n     * The previous node in the list.\r\n     */\r\n    prev: LinkedListNode<T> | null = null;\r\n\r\n    /**\r\n     * The user value stored in the node.\r\n     */\r\n    readonly value: T;\r\n\r\n    /**\r\n     * Construct a new linked list node.\r\n     *\r\n     * @param list - The list which owns the node.\r\n     *\r\n     * @param value - The value for the link.\r\n     */\r\n    constructor(list: LinkedList<T>, value: T) {\r\n      this.list = list;\r\n      this.value = value;\r\n    }\r\n  }\r\n}\r\n"],"names":["Private"],"mappings":"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"}