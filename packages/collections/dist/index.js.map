{"version":3,"file":"index.js","sources":["../src/bplustree.ts","../src/linkedlist.ts"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\r\n// Distributed under the terms of the Modified BSD License.\r\n/*-----------------------------------------------------------------------------\r\n| Copyright (c) 2014-2018, PhosphorJS Contributors\r\n|\r\n| Distributed under the terms of the BSD 3-Clause License.\r\n| The full license is in the file LICENSE, distributed with this software.\r\n|----------------------------------------------------------------------------*/\r\nimport {\r\n  ArrayExt, IIterable, IIterator, IRetroable, IterableOrArrayLike, each, empty\r\n} from \"@lumino/algorithm\";\r\n\r\n\r\n/**\r\n * A generic B+ tree.\r\n *\r\n * #### Notes\r\n * Most operations have `O(log32 n)` or better complexity.\r\n */\r\nexport\r\nclass BPlusTree<T> implements IIterable<T>, IRetroable<T> {\r\n  /**\r\n   * Construct a new B+ tree.\r\n   *\r\n   * @param cmp - The item comparison function for the tree.\r\n   */\r\n  constructor(cmp: (a: T, b: T) => number) {\r\n    this.cmp = cmp;\r\n  }\r\n\r\n  /**\r\n   * The item comparison function for the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(1)`\r\n   */\r\n  readonly cmp: (a: T, b: T) => number;\r\n\r\n  /**\r\n   * Whether the tree is empty.\r\n   *\r\n   * #### Complexity\r\n   * `O(1)`\r\n   */\r\n  get isEmpty(): boolean {\r\n    return this._root.size === 0;\r\n  }\r\n\r\n  /**\r\n   * The size of the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(1)`\r\n   */\r\n  get size(): number {\r\n    return this._root.size;\r\n  }\r\n\r\n  /**\r\n   * The first item in the tree.\r\n   *\r\n   * This is `undefined` if the tree is empty.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  get first(): T | undefined {\r\n    let node = Private.firstLeaf(this._root);\r\n    return node.size > 0 ? node.items[0] : undefined;\r\n  }\r\n\r\n  /**\r\n   * The last item in the tree.\r\n   *\r\n   * This is `undefined` if the tree is empty.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  get last(): T | undefined {\r\n    let node = Private.lastLeaf(this._root);\r\n    return node.size > 0 ? node.items[node.size - 1] : undefined;\r\n  }\r\n\r\n  /**\r\n   * Create an iterator over the items in the tree.\r\n   *\r\n   * @returns A new iterator starting with the first item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  iter(): IIterator<T> {\r\n    return Private.iterItems(this._root);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator over the items in the tree.\r\n   *\r\n   * @returns A new iterator starting with the last item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  retro(): IIterator<T> {\r\n    return Private.retroItems(this._root);\r\n  }\r\n\r\n  /**\r\n   * Create an iterator for a slice of items in the tree.\r\n   *\r\n   * @param start - The index of the first item, inclusive. This\r\n   *   should be `< stop`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `0`.\r\n   *\r\n   * @param stop - The index of the last item, exclusive. This\r\n   *   should be `> start`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `size`.\r\n   *\r\n   * @returns A new iterator starting with the specified item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  slice(start?: number, stop?: number): IIterator<T> {\r\n    return Private.sliceItems(this._root, start, stop);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator for a slice of items in the tree.\r\n   *\r\n   * @param start - The index of the first item, inclusive. This\r\n   *   should be `> stop`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `size - 1`.\r\n   *\r\n   * @param stop - The index of the last item, exclusive. This\r\n   *   should be `< start`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `-size - 1`.\r\n   *\r\n   * @returns A new reverse iterator starting with the specified item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  retroSlice(start?: number, stop?: number): IIterator<T> {\r\n    return Private.retroSliceItems(this._root, start, stop);\r\n  }\r\n\r\n  /**\r\n   * Get the item at a particular index.\r\n   *\r\n   * @param index - The index of the item of interest. Negative\r\n   *   values are taken as an offset from the end of the tree.\r\n   *\r\n   * @returns The item at the specified index, or `undefined` if\r\n   *   the index is out of range.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  at(index: number): T | undefined {\r\n    return Private.itemAt(this._root, index);\r\n  }\r\n\r\n  /**\r\n   * Test whether the tree has an item which matches a key.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - A function which compares an item against the key.\r\n   *\r\n   * @returns `true` if the tree has an item which matches the given\r\n   *   key, `false` otherwise.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  has<U>(key: U, cmp: (item: T, key: U) => number): boolean {\r\n    return Private.hasItem(this._root, key, cmp);\r\n  }\r\n\r\n  /**\r\n   * Get the index of an item which matches a key.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - A function which compares an item against the key.\r\n   *\r\n   * @returns The index of the item which matches the given key. A\r\n   *   negative value means that a matching item does not exist in\r\n   *   the tree, but if one did it would reside at `-index - 1`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  indexOf<U>(key: U, cmp: (item: T, key: U) => number): number {\r\n    return Private.indexOf(this._root, key, cmp);\r\n  }\r\n\r\n  /**\r\n   * Get the item which matches a key.\r\n   *\r\n   * @param item - The key of interest.\r\n   *\r\n   * @param cmp - A function which compares an item against the key.\r\n   *\r\n   * @returns The item which matches the given key, or `undefined` if\r\n   *   the tree does not have a matching item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  get<U>(key: U, cmp: (item: T, key: U) => number): T | undefined {\r\n    return Private.getItem(this._root, key, cmp);\r\n  }\r\n\r\n  /**\r\n   * Assign new items to the tree, replacing all current items.\r\n   *\r\n   * @param items - The items to assign to the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(n log32 n)`\r\n   */\r\n  assign(items: IterableOrArrayLike<T>): void {\r\n    this.clear();\r\n    this.update(items);\r\n  }\r\n\r\n  /**\r\n   * Insert an item into the tree.\r\n   *\r\n   * @param item - The item of interest.\r\n   *\r\n   * @returns If the given item matches an existing item in the tree,\r\n   *   the given item will replace it, and the existing item will be\r\n   *   returned. Otherwise, this method returns `undefined`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  insert(item: T): T | undefined {\r\n    let existing = Private.insertItem(this._root, item, this.cmp);\r\n    this._root = Private.maybeSplitRoot(this._root);\r\n    return existing;\r\n  }\r\n\r\n  /**\r\n   * Update the tree with multiple items.\r\n   *\r\n   * @param items - The items to insert into the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(k log32 n)`\r\n   */\r\n  update(items: IterableOrArrayLike<T>): void {\r\n    each(items, item => { this.insert(item); });\r\n  }\r\n\r\n  /**\r\n   * Delete an item which matches a particular key.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - A function which compares an item against the key.\r\n   *\r\n   * @returns The item removed from the tree, or `undefined` if no\r\n   *   item matched the given key.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  delete<U>(key: U, cmp: (item: T, key: U) => number): T | undefined {\r\n    let item = Private.deleteItem(this._root, key, cmp);\r\n    this._root = Private.maybeExtractRoot(this._root);\r\n    return item;\r\n  }\r\n\r\n  /**\r\n   * Remove an item at a particular index.\r\n   *\r\n   * @param index - The index of the item to remove. Negative\r\n   *   values are taken as an offset from the end of the tree.\r\n   *\r\n   * @returns The item removed from the tree, or `undefined` if\r\n   *   the given index is out of range.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  remove(index: number): T | undefined {\r\n    let item = Private.removeItem(this._root, index);\r\n    this._root = Private.maybeExtractRoot(this._root);\r\n    return item;\r\n  }\r\n\r\n  /**\r\n   * Clear the contents of the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(n)`\r\n   */\r\n  clear(): void {\r\n    Private.clear(this._root);\r\n    this._root = new Private.LeafNode<T>();\r\n  }\r\n\r\n  private _root: Private.Node<T> = new Private.LeafNode<T>();\r\n}\r\n\r\n\r\n/**\r\n * The namespace for the `BPlusTree` class statics.\r\n */\r\nexport\r\nnamespace BPlusTree {\r\n  /**\r\n   * Create a new B+ tree populated with the given items.\r\n   *\r\n   * @param items - The items to add to the tree.\r\n   *\r\n   * @param cmp - The item comparison function for the tree.\r\n   *\r\n   * @returns A new B+ tree populated with the given items.\r\n   *\r\n   * #### Complexity\r\n   * `O(n log32 n)`\r\n   */\r\n  export\r\n  function from<T>(items: IterableOrArrayLike<T>, cmp: (a: T, b: T) => number): BPlusTree<T> {\r\n    let tree = new BPlusTree<T>(cmp);\r\n    tree.assign(items);\r\n    return tree;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * The namespace for the module implementation details.\r\n */\r\nnamespace Private {\r\n  /**\r\n   * A const enum of the B+ tree node types.\r\n   */\r\n  export\r\n  const enum NodeType { Branch, Leaf }\r\n\r\n  /**\r\n   * A branch node in a B+ tree.\r\n   */\r\n  export\r\n  class BranchNode<T> {\r\n    /**\r\n     * The left-most item of each child subtree.\r\n     */\r\n    readonly items: T[] = [];\r\n\r\n    /**\r\n     * The cumulative sizes of each child subtree.\r\n     */\r\n    readonly sizes: number[] = [];\r\n\r\n    /**\r\n     * The child nodes of this branch node.\r\n     */\r\n    readonly children: Node<T>[] = [];\r\n\r\n    /**\r\n     * The discriminated type of the node.\r\n     */\r\n    get type(): NodeType.Branch {\r\n      return NodeType.Branch;\r\n    }\r\n\r\n    /**\r\n     * The total number of items in the subtree.\r\n     */\r\n    get size(): number {\r\n      return this.sizes[this.sizes.length - 1];\r\n    }\r\n\r\n    /**\r\n     * The tree width of the node.\r\n     */\r\n    get width(): number {\r\n      return this.children.length;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A leaf node in a B+ tree.\r\n   */\r\n  export\r\n  class LeafNode<T> {\r\n    /**\r\n     * The next sibling leaf node of this leaf node.\r\n     */\r\n    next: LeafNode<T> | null = null;\r\n\r\n    /**\r\n     * The previous sibling leaf node of this leaf node.\r\n     */\r\n    prev: LeafNode<T> | null = null;\r\n\r\n    /**\r\n     * The items of the leaf.\r\n     */\r\n    readonly items: T[] = [];\r\n\r\n    /**\r\n     * The discriminated type of the node.\r\n     */\r\n    get type(): NodeType.Leaf {\r\n      return NodeType.Leaf;\r\n    }\r\n\r\n    /**\r\n     * The total number of items in the leaf.\r\n     */\r\n    get size(): number {\r\n      return this.items.length;\r\n    }\r\n\r\n    /**\r\n     * The tree width of the node.\r\n     */\r\n    get width(): number {\r\n      return this.items.length;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A type alias for the B+ tree nodes.\r\n   */\r\n  export\r\n  type Node<T> = BranchNode<T> | LeafNode<T>;\r\n\r\n  /**\r\n   * Get the first leaf node in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns The first leaf node in the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function firstLeaf<T>(node: Node<T>): LeafNode<T> {\r\n    while (node.type === NodeType.Branch) {\r\n      node = node.children[0];\r\n    }\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Get the last leaf node in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns The last leaf node in the tree.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function lastLeaf<T>(node: Node<T>): LeafNode<T> {\r\n    while (node.type === NodeType.Branch) {\r\n      node = node.children[node.children.length - 1];\r\n    }\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Create a forward iterator for the items in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns A new forward iterator starting with the first item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function iterItems<T>(node: Node<T>): IIterator<T> {\r\n    let leaf = firstLeaf(node);\r\n    return new ForwardIterator<T>(leaf, 0, -1);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator for the items in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns A new reverse iterator starting with the last item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function retroItems<T>(node: Node<T>): IIterator<T> {\r\n    let leaf = lastLeaf(node);\r\n    return new RetroIterator<T>(leaf, leaf.size - 1, -1);\r\n  }\r\n\r\n  /**\r\n   * Create an iterator for a slice of items in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param start - The index of the first item, inclusive. This\r\n   *   should be `< stop`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `0`.\r\n   *\r\n   * @param stop - The index of the last item, exclusive. This\r\n   *   should be `> start`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `size`.\r\n   *\r\n   * @returns A new iterator starting with the specified item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function sliceItems<T>(node: Node<T>, start?: number, stop?: number): IIterator<T> {\r\n    // Normalize the start index.\r\n    if (start === undefined) {\r\n      start = 0;\r\n    } else if (start < 0) {\r\n      start = Math.max(0, start + node.size);\r\n    } else {\r\n      start = Math.min(start, node.size);\r\n    }\r\n\r\n    // Normalize the stop index.\r\n    if (stop === undefined) {\r\n      stop = node.size;\r\n    } else if (stop < 0) {\r\n      stop = Math.max(0, stop + node.size);\r\n    } else {\r\n      stop = Math.min(stop, node.size);\r\n    }\r\n\r\n    // Compute effective count.\r\n    let count = Math.max(0, stop - start);\r\n\r\n    // Bail early if there is nothing to iterate.\r\n    if (count === 0) {\r\n      return empty<T>();\r\n    }\r\n\r\n    // Find the starting leaf node and local index.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByIndex(node.sizes, start);\r\n      if (i > 0) start -= node.sizes[i - 1];\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Return the forward iterator for the range.\r\n    return new ForwardIterator<T>(node, start, count);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator for a slice of items in the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param start - The index of the first item, inclusive. This\r\n   *   should be `> stop`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `size - 1`.\r\n   *\r\n   * @param stop - The index of the last item, exclusive. This\r\n   *   should be `< start`. Negative values are taken as an offset\r\n   *   from the end of the tree. The default is `-size - 1`.\r\n   *\r\n   * @returns A new reverse iterator starting with the specified item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function retroSliceItems<T>(node: Node<T>, start?: number, stop?: number): IIterator<T> {\r\n    // Normalize the start index.\r\n    if (start === undefined) {\r\n      start = node.size - 1;\r\n    } else if (start < 0) {\r\n      start = Math.max(-1, start + node.size);\r\n    } else {\r\n      start = Math.min(start, node.size - 1);\r\n    }\r\n\r\n    // Normalize the stop index.\r\n    if (stop === undefined) {\r\n      stop = -1;\r\n    } else if (stop < 0) {\r\n      stop = Math.max(-1, stop + node.size);\r\n    } else {\r\n      stop = Math.min(stop, node.size - 1);\r\n    }\r\n\r\n    // Compute the effective count.\r\n    let count = Math.max(0, start - stop);\r\n\r\n    // Bail early if there is nothing to iterate.\r\n    if (count === 0) {\r\n      return empty<T>();\r\n    }\r\n\r\n    // Find the starting leaf node and local index.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByIndex(node.sizes, start);\r\n      if (i > 0) start -= node.sizes[i - 1];\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Return the retro iterator for the range.\r\n    return new RetroIterator<T>(node, start, count);\r\n  }\r\n\r\n  /**\r\n   * Get the item at the specified index.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param index - The index of the item of interest. Negative\r\n   *   values are taken as an offset from the end of the tree.\r\n   *\r\n   * @returns The item at the specified index, or `undefined` if\r\n   *   the index is out of range.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function itemAt<T>(node: Node<T>, index: number): T | undefined {\r\n    // Wrap negative indices.\r\n    if (index < 0) {\r\n      index += node.size;\r\n    }\r\n\r\n    // Bail early if the index is out of range.\r\n    if (index < 0 || index >= node.size) {\r\n      return undefined;\r\n    }\r\n\r\n    // Find the containing leaf node and local index.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByIndex(node.sizes, index);\r\n      if (i > 0) index -= node.sizes[i - 1];\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Return the item at the specified index.\r\n    return node.items[index];\r\n  }\r\n\r\n  /**\r\n   * Test whether the tree contains an item which matches a key.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - The key comparison function.\r\n   *\r\n   * @returns Whether the tree contains a matching item.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function hasItem<T, U>(node: Node<T>, key: U, cmp: (item: T, key: U) => number): boolean {\r\n    // Find the containing leaf node.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByKey(node.items, key, cmp);\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Find the key index.\r\n    let i = findKeyIndex(node.items, key, cmp);\r\n\r\n    // Return whether or not the node contains a matching item.\r\n    return i >= 0;\r\n  }\r\n\r\n  /**\r\n   * Get the index of the item which matches a key.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - The key comparison function.\r\n   *\r\n   * @returns The index of the item which matches the given key. A\r\n   *   negative value means that a matching item does not exist in\r\n   *   the tree, but if one did it would reside at `-index - 1`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function indexOf<T, U>(node: Node<T>, key: U, cmp: (item: T, key: U) => number): number {\r\n    // Set up the global index.\r\n    let index = 0;\r\n\r\n    // Find the containing leaf node and global index.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByKey(node.items, key, cmp);\r\n      if (i > 0) index += node.sizes[i - 1];\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Find the key index.\r\n    let i = findKeyIndex(node.items, key, cmp);\r\n\r\n    // Return the final computed index.\r\n    return i >= 0 ? index + i : -index + i;\r\n  }\r\n\r\n  /**\r\n   * Get the item for a particular key.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - The key comparison function.\r\n   *\r\n   * @returns The item for the specified key, or `undefined` if\r\n   *   the tree does not have a matching item for the key.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   */\r\n  export\r\n  function getItem<T, U>(node: Node<T>, key: U, cmp: (item: T, key: U) => number): T | undefined {\r\n    // Find the containing leaf node.\r\n    while (node.type === NodeType.Branch) {\r\n      let i = findPivotIndexByKey(node.items, key, cmp);\r\n      node = node.children[i];\r\n    }\r\n\r\n    // Find the key index.\r\n    let i = findKeyIndex(node.items, key, cmp);\r\n\r\n    // Return the item for the given key.\r\n    return i >= 0 ? node.items[i] : undefined;\r\n  }\r\n\r\n  /**\r\n   * Insert an item into the tree.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @param item - The item of interest.\r\n   *\r\n   * @param cmp - The item comparison function.\r\n   *\r\n   * @returns If the given item matches an existing item in the tree,\r\n   *   the given item will replace it, and the existing item will be\r\n   *   returned. Otherwise, this function returns `undefined`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   *\r\n   * #### Notes\r\n   * The root may be overfull after calling this function.\r\n   */\r\n  export\r\n  function insertItem<T>(node: Node<T>, item: T, cmp: (a: T, b: T) => number): T | undefined {\r\n    // Handle leaf nodes first.\r\n    if (node.type === NodeType.Leaf) {\r\n      // Find the index for the given item.\r\n      let i = findKeyIndex(node.items, item, cmp);\r\n\r\n      // Fetch the existing item and insert the new item.\r\n      let existing: T | undefined;\r\n      if (i >= 0) {\r\n        existing = node.items[i];\r\n        node.items[i] = item;\r\n      } else {\r\n        existing = undefined;\r\n        ArrayExt.insert(node.items, -i - 1, item);\r\n      }\r\n\r\n      // Return the existing item.\r\n      return existing;\r\n    }\r\n\r\n    // Find the pivot index for the insert.\r\n    let i = findPivotIndexByKey(node.items, item, cmp);\r\n\r\n    // Fetch the pivot child.\r\n    let child = node.children[i];\r\n\r\n    // Fetch the current size of the child.\r\n    let prevSize = child.size;\r\n\r\n    // Recursively insert the item into the child.\r\n    let existing = insertItem(child, item, cmp);\r\n\r\n    // Fetch the updated size of the child.\r\n    let currSize = child.size;\r\n\r\n    // Update the item state of the branch.\r\n    node.items[i] = child.items[0];\r\n\r\n    // Bail early if the child size did not change.\r\n    if (prevSize === currSize) {\r\n      return existing;\r\n    }\r\n\r\n    // Split the child if it's overfull.\r\n    if (child.width > MAX_NODE_WIDTH) {\r\n      let next = splitNode(child);\r\n      ArrayExt.insert(node.children, i + 1, next);\r\n      ArrayExt.insert(node.items, i + 1, next.items[0]);\r\n    }\r\n\r\n    // Update the dirty sizes of the branch.\r\n    updateSizes(node, i);\r\n\r\n    // Return the existing item.\r\n    return existing;\r\n  }\r\n\r\n  /**\r\n   * Delete an item in the tree.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @param key - The key of interest.\r\n   *\r\n   * @param cmp - The key comparison function.\r\n   *\r\n   * @returns The deleted item or `undefined`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   *\r\n   * #### Notes\r\n   * The root may be underfull after calling this function.\r\n   */\r\n  export\r\n  function deleteItem<T, U>(node: Node<T>, key: U, cmp: (item: T, key: U) => number): T | undefined {\r\n    // Handle leaf nodes first.\r\n    if (node.type === NodeType.Leaf) {\r\n      // Find the index for the given key.\r\n      let i = findKeyIndex(node.items, key, cmp);\r\n\r\n      // Bail early if the item does not exist.\r\n      if (i < 0) {\r\n        return undefined;\r\n      }\r\n\r\n      // Remove the item at the computed index.\r\n      return ArrayExt.removeAt(node.items, i);\r\n    }\r\n\r\n    // Find the pivot index for the delete.\r\n    let i = findPivotIndexByKey(node.items, key, cmp);\r\n\r\n    // Fetch the pivot child.\r\n    let child = node.children[i];\r\n\r\n    // Fetch the current size of the child.\r\n    let prevSize = child.size;\r\n\r\n    // Recursively remove the item from the child.\r\n    let item = deleteItem(child, key, cmp);\r\n\r\n    // Fetch the updated size of the child.\r\n    let currSize = child.size;\r\n\r\n    // Bail early if the child size did not change.\r\n    if (prevSize === currSize) {\r\n      return item;\r\n    }\r\n\r\n    // Update the item state of the branch.\r\n    node.items[i] = child.items[0];\r\n\r\n    // Join the child if it's underfull.\r\n    if (child.width < MIN_NODE_WIDTH) {\r\n      i = joinChild(node, i);\r\n    }\r\n\r\n    // Update the dirty sizes of the branch.\r\n    updateSizes(node, i);\r\n\r\n    // Return the deleted item.\r\n    return item;\r\n  }\r\n\r\n  /**\r\n   * Remove an item from the tree.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @param index - The index of interest.\r\n   *\r\n   * @returns The removed item or `undefined`.\r\n   *\r\n   * #### Complexity\r\n   * `O(log32 n)`\r\n   *\r\n   * #### Notes\r\n   * The root may be underfull after calling this function.\r\n   */\r\n  export\r\n  function removeItem<T>(node: Node<T>, index: number): T | undefined {\r\n    // Wrap negative indices.\r\n    if (index < 0) {\r\n      index += node.size;\r\n    }\r\n\r\n    // Bail early if the index is out of range.\r\n    if (index < 0 || index >= node.size) {\r\n      return undefined;\r\n    }\r\n\r\n    // Handle leaf nodes first.\r\n    if (node.type === NodeType.Leaf) {\r\n      return ArrayExt.removeAt(node.items, index);\r\n    }\r\n\r\n    // Find the pivot index for the remove.\r\n    let i = findPivotIndexByIndex(node.sizes, index);\r\n    if (i > 0) index -= node.sizes[i];\r\n\r\n    // Fetch the pivot child.\r\n    let child = node.children[i];\r\n\r\n    // Recursively remove the item from the child.\r\n    let item = removeItem(child, index);\r\n\r\n    // Update the item state of the branch.\r\n    node.items[i] = child.items[0];\r\n\r\n    // Join the child if it's underfull.\r\n    if (child.width < MIN_NODE_WIDTH) {\r\n      i = joinChild(node, i);\r\n    }\r\n\r\n    // Update the dirty sizes of the branch.\r\n    updateSizes(node, i);\r\n\r\n    // Return the removed item.\r\n    return item;\r\n  }\r\n\r\n  /**\r\n   * Recursively clear the contents of a node.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * #### Complexity\r\n   * `O(n)`\r\n   */\r\n  export\r\n  function clear<T>(node: Node<T>): void {\r\n    if (node.type === NodeType.Branch) {\r\n      each(node.children, clear);\r\n      node.children.length = 0;\r\n      node.sizes.length = 0;\r\n      node.items.length = 0;\r\n    } else {\r\n      node.items.length = 0;\r\n      node.next = null;\r\n      node.prev = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Split a root node and create a new root, if needed.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns The new root node.\r\n   */\r\n  export\r\n  function maybeSplitRoot<T>(node: Node<T>): Node<T> {\r\n    // Bail early if the current root is not overfull.\r\n    if (node.width <= MAX_NODE_WIDTH) {\r\n      return node;\r\n    }\r\n\r\n    // Create a new root branch node.\r\n    let root = new BranchNode<T>();\r\n\r\n    // Split the node to the right and create a new sibling.\r\n    let next = splitNode(node);\r\n\r\n    // Add the sizes to the root.\r\n    root.sizes[0] = node.size;\r\n    root.sizes[1] = node.size + next.size;\r\n\r\n    // Add the children to the root.\r\n    root.children[0] = node;\r\n    root.children[1] = next;\r\n\r\n    // Add the items to the root.\r\n    root.items[0] = node.items[0];\r\n    root.items[1] = next.items[0];\r\n\r\n    // Return the new root node.\r\n    return root;\r\n  }\r\n\r\n  /**\r\n   * Extract a single node child as a new root, if needed.\r\n   *\r\n   * @param node - The root node of interest.\r\n   *\r\n   * @returns The new root node.\r\n   */\r\n  export\r\n  function maybeExtractRoot<T>(node: Node<T>): Node<T> {\r\n    // Bail early if the node it already a leaf.\r\n    if (node.type === NodeType.Leaf) {\r\n      return node;\r\n    }\r\n\r\n    // Bail early if the branch has more than one child.\r\n    if (node.children.length > 1) {\r\n      return node;\r\n    }\r\n\r\n    // Extract the sole remaining child as the new root.\r\n    let root = node.children.pop()!;\r\n\r\n    // Clear the rest of the node state.\r\n    clear(node);\r\n\r\n    // Return the new root.\r\n    return root;\r\n  }\r\n\r\n  /**\r\n   * The maximum width for a node in the tree.\r\n   */\r\n  const MAX_NODE_WIDTH = 32;\r\n\r\n  /**\r\n   * The minimum width for a node in the tree.\r\n   */\r\n  const MIN_NODE_WIDTH = MAX_NODE_WIDTH >> 1;\r\n\r\n  /**\r\n   * A forward iterator for a B+ tree.\r\n   */\r\n  class ForwardIterator<T> implements IIterator<T> {\r\n    /**\r\n     * Construct a new forward iterator.\r\n     *\r\n     * @param node - The first leaf node in the chain.\r\n     *\r\n     * @param index - The local index of the first item.\r\n     *\r\n     * @param count - The number of items to iterate. A value `< 0`\r\n     *   will iterate all available items.\r\n     */\r\n    constructor(node: LeafNode<T> | null, index: number, count: number) {\r\n      this._node = node;\r\n      this._index = index;\r\n      this._count = count;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<T> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<T> {\r\n      return new ForwardIterator<T>(this._node, this._index, this._count);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): T | undefined {\r\n      if (this._node === null || this._count === 0) {\r\n        return undefined;\r\n      }\r\n      if (this._index >= this._node.size) {\r\n        this._node = this._node.next;\r\n        this._index = 0;\r\n        return this.next();\r\n      }\r\n      if (this._count > 0) {\r\n        this._count--;\r\n      }\r\n      return this._node.items[this._index++];\r\n    }\r\n\r\n    private _index: number;\r\n    private _count: number;\r\n    private _node: LeafNode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * A reverse iterator for a B+ tree.\r\n   */\r\n  class RetroIterator<T> implements IIterator<T> {\r\n    /**\r\n     * Construct a new retro iterator.\r\n     *\r\n     * @param node - The last leaf node in the chain.\r\n     *\r\n     * @param index - The local index of the last item.\r\n     *\r\n     * @param count - The number of items to iterate. A value `< 0`\r\n     *   will iterate all available items.\r\n     */\r\n    constructor(node: LeafNode<T> | null, index: number, count: number) {\r\n      this._node = node;\r\n      this._index = index;\r\n      this._count = count;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<T> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<T> {\r\n      return new RetroIterator<T>(this._node, this._index, this._count);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): T | undefined {\r\n      if (this._node === null || this._count === 0) {\r\n        return undefined;\r\n      }\r\n      if (this._index >= this._node.size) {\r\n        this._index = this._node.size - 1;\r\n      }\r\n      if (this._index < 0) {\r\n        this._node = this._node.prev;\r\n        this._index = this._node ? this._node.size - 1 : -1;\r\n        return this.next();\r\n      }\r\n      if (this._count > 0) {\r\n        this._count--;\r\n      }\r\n      return this._node.items[this._index--];\r\n    }\r\n\r\n    private _index: number;\r\n    private _count: number;\r\n    private _node: LeafNode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * Find the pivot index for a particular local index.\r\n   */\r\n  function findPivotIndexByIndex(sizes: number[], index: number): number {\r\n    let n = sizes.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      if (sizes[i] > index) {\r\n        return i;\r\n      }\r\n    }\r\n    return n - 1;\r\n  }\r\n\r\n  /**\r\n   * Find the pivot index for a particular key.\r\n   */\r\n  function findPivotIndexByKey<T, U>(items: T[], key: U, cmp: (item: T, key: U) => number): number {\r\n    let n = items.length;\r\n    for (let i = 1; i < n; ++i) {\r\n      if (cmp(items[i], key) > 0) {\r\n        return i - 1;\r\n      }\r\n    }\r\n    return n - 1;\r\n  }\r\n\r\n  /**\r\n   * Find the key index for a particular key.\r\n   */\r\n  function findKeyIndex<T, U>(items: T[], key: U, cmp: (item: T, key: U) => number): number {\r\n    let n = items.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      let c = cmp(items[i], key);\r\n      if (c === 0) {\r\n        return i;\r\n      }\r\n      if (c > 0) {\r\n        return -i - 1;\r\n      }\r\n    }\r\n    return -n - 1;\r\n  }\r\n\r\n  /**\r\n   * Update the sizes of a branch node starting at the given index.\r\n   */\r\n  function updateSizes<T>(node: BranchNode<T>, i: number): void {\r\n    let { sizes, children } = node;\r\n    let last = i > 0 ? sizes[i - 1] : 0;\r\n    for (let n = children.length; i < n; ++i) {\r\n      last = sizes[i] = last + children[i].size;\r\n    }\r\n    sizes.length = children.length;\r\n  }\r\n\r\n  /**\r\n   * Split a node and return its new next sibling.\r\n   *\r\n   * @param node - The node of interest.\r\n   *\r\n   * @returns The new next sibling node.\r\n   */\r\n  function splitNode<T>(node: Node<T>): Node<T> {\r\n    // Handle leaf nodes first.\r\n    if (node.type === NodeType.Leaf) {\r\n      // Create the new sibling leaf node.\r\n      let next = new LeafNode<T>();\r\n\r\n      // Move the items to the new sibling.\r\n      let v1 = node.items;\r\n      let v2 = next.items;\r\n      for (let i = MIN_NODE_WIDTH, n = v1.length; i < n; ++i) {\r\n        v2.push(v1[i]);\r\n      }\r\n      v1.length = MIN_NODE_WIDTH;\r\n\r\n      // Patch up the sibling links.\r\n      if (node.next) node.next.prev = next;\r\n      next.next = node.next;\r\n      next.prev = node;\r\n      node.next = next;\r\n\r\n      // Return the new next sibling.\r\n      return next;\r\n    }\r\n\r\n    // Create the new sibling branch node.\r\n    let next = new BranchNode<T>();\r\n\r\n    // Move the children to the new sibling.\r\n    let c1 = node.children;\r\n    let c2 = next.children;\r\n    for (let i = MIN_NODE_WIDTH, n = c1.length; i < n; ++i) {\r\n      c2.push(c1[i]);\r\n    }\r\n    c1.length = MIN_NODE_WIDTH;\r\n\r\n    // Move the items to the new sibling.\r\n    let v1 = node.items;\r\n    let v2 = next.items;\r\n    for (let i = MIN_NODE_WIDTH, n = v1.length; i < n; ++i) {\r\n      v2.push(v1[i]);\r\n    }\r\n    v1.length = MIN_NODE_WIDTH;\r\n\r\n    // Update the dirty sizes of the nodes.\r\n    updateSizes(node, MIN_NODE_WIDTH);\r\n    updateSizes(next, 0);\r\n\r\n    // Return the new next sibling.\r\n    return next;\r\n  }\r\n\r\n  /**\r\n   * Join a child node of a branch with one of its siblings.\r\n   *\r\n   * @param node - The branch node of interest.\r\n   *\r\n   * @param i - The index of the child node of interest.\r\n   *\r\n   * @returns The first modified index.\r\n   *\r\n   * #### Notes\r\n   * This may cause the branch to become underfull.\r\n   */\r\n  function joinChild<T>(node: BranchNode<T>, i: number): number {\r\n    // Fetch the child to be joined.\r\n    let child = node.children[i];\r\n\r\n    // Fetch the relevant sibling.\r\n    let sibling = i === 0 ? node.children[i + 1] : node.children[i - 1];\r\n\r\n    // Compute the flags which control the join behavior.\r\n    let hasNext = i === 0;\r\n    let isLeaf = child.type === NodeType.Leaf;\r\n    let hasExtra = sibling.width > MIN_NODE_WIDTH;\r\n\r\n    // Join case #1: steal from next sibling leaf\r\n    if (isLeaf && hasExtra && hasNext) {\r\n      // Cast the children as leaves.\r\n      let c = child as LeafNode<T>;\r\n      let s = sibling as LeafNode<T>;\r\n\r\n      // Steal an item.\r\n      c.items.push(s.items.shift()!);\r\n\r\n      // Update the branch items.\r\n      node.items[i + 1] = s.items[0];\r\n\r\n      // Return the first modified index.\r\n      return i;\r\n    }\r\n\r\n    // Join case #2: steal from previous sibling leaf\r\n    if (isLeaf && hasExtra && !hasNext) {\r\n      // Cast the children as leaves.\r\n      let c = child as LeafNode<T>;\r\n      let s = sibling as LeafNode<T>;\r\n\r\n      // Steal an item.\r\n      c.items.unshift(s.items.pop()!);\r\n\r\n      // Update the branch items.\r\n      node.items[i] = c.items[0];\r\n\r\n      // Return the first modified index.\r\n      return i - 1;\r\n    }\r\n\r\n    // Join case #3: merge with next sibling leaf\r\n    if (isLeaf && !hasExtra && hasNext) {\r\n      // Cast the children as leaves.\r\n      let c = child as LeafNode<T>;\r\n      let s = sibling as LeafNode<T>;\r\n\r\n      // Merge items.\r\n      s.items.unshift(...c.items);\r\n\r\n      // Remove the old branch child.\r\n      ArrayExt.removeAt(node.children, i);\r\n\r\n      // Remove the stale branch item.\r\n      ArrayExt.removeAt(node.items, i + 1);\r\n\r\n      // Patch up the sibling links.\r\n      if (c.prev) c.prev.next = s;\r\n      s.prev = c.prev;\r\n\r\n      // Clear the original child.\r\n      clear(c);\r\n\r\n      // Return the first modified index.\r\n      return i;\r\n    }\r\n\r\n    // Join case #4: merge with previous sibling leaf\r\n    if (isLeaf && !hasExtra && !hasNext) {\r\n      // Cast the children as leaves.\r\n      let c = child as LeafNode<T>;\r\n      let s = sibling as LeafNode<T>;\r\n\r\n      // Merge items.\r\n      s.items.push(...c.items);\r\n\r\n      // Remove the old branch child.\r\n      ArrayExt.removeAt(node.children, i);\r\n\r\n      // Remove the stale branch item.\r\n      ArrayExt.removeAt(node.items, i);\r\n\r\n      // Patch up the sibling links.\r\n      if (c.next) c.next.prev = s;\r\n      s.next = c.next;\r\n\r\n      // Clear the original child.\r\n      clear(c);\r\n\r\n      // Return the first modified index.\r\n      return i - 1;\r\n    }\r\n\r\n    // Join case #5: steal from next sibling branch\r\n    if (!isLeaf && hasExtra && hasNext) {\r\n      // Cast the children to branches.\r\n      let c = child as BranchNode<T>;\r\n      let s = sibling as BranchNode<T>;\r\n\r\n      // Steal a child from the next sibling.\r\n      c.children.push(s.children.shift()!);\r\n\r\n      // Steal an item from the next sibling.\r\n      c.items.push(s.items.shift()!);\r\n\r\n      // Update the branch items.\r\n      node.items[i + 1] = s.items[0];\r\n\r\n      // Update the sibling sizes.\r\n      updateSizes(c, c.width - 1);\r\n      updateSizes(s, 0);\r\n\r\n      // Return the first modified index.\r\n      return i;\r\n    }\r\n\r\n    // Join case #6: steal from previous sibling branch\r\n    if (!isLeaf && hasExtra && !hasNext) {\r\n      // Cast the children to branches.\r\n      let c = child as BranchNode<T>;\r\n      let s = sibling as BranchNode<T>;\r\n\r\n      // Steal a child from the previous sibling.\r\n      c.children.unshift(s.children.pop()!);\r\n\r\n      // Steal an item from the previous sibling.\r\n      c.items.unshift(s.items.pop()!);\r\n\r\n      // Update the branch items.\r\n      node.items[i] = c.items[0];\r\n\r\n      // Update the sibling sizes.\r\n      updateSizes(c, 0);\r\n      updateSizes(s, s.width - 1);\r\n\r\n      // Return the first modified index.\r\n      return i - 1;\r\n    }\r\n\r\n    // Join case #7: merge with next sibling branch\r\n    if (!isLeaf && !hasExtra && hasNext) {\r\n      // Cast the children to branches.\r\n      let c = child as BranchNode<T>;\r\n      let s = sibling as BranchNode<T>;\r\n\r\n      // Merge the children with the next sibling.\r\n      s.children.unshift(...c.children);\r\n\r\n      // Merge the items with the next sibling.\r\n      s.items.unshift(...c.items);\r\n\r\n      // Remove the old branch child.\r\n      ArrayExt.removeAt(node.children, i);\r\n\r\n      // Remove the stale branch item.\r\n      ArrayExt.removeAt(node.items, i + 1);\r\n\r\n      // Update the sibling sizes.\r\n      updateSizes(s, 0);\r\n\r\n      // Clear the original child but, not its children.\r\n      c.children.length = 0;\r\n      clear(c);\r\n\r\n      // Return the first modified index.\r\n      return i;\r\n    }\r\n\r\n    // Join case #8: merge with previous sibling branch\r\n    if (!isLeaf && !hasExtra && !hasNext) {\r\n      // Cast the children to branches.\r\n      let c = child as BranchNode<T>;\r\n      let s = sibling as BranchNode<T>;\r\n\r\n      // Merge the children with the previous sibling.\r\n      s.children.push(...c.children);\r\n\r\n      // Merge the items with the previous sibling.\r\n      s.items.push(...c.items);\r\n\r\n      // Remove the old branch child.\r\n      ArrayExt.removeAt(node.children, i);\r\n\r\n      // Remove the stale branch item.\r\n      ArrayExt.removeAt(node.items, i);\r\n\r\n      // Update the sibling sizes.\r\n      updateSizes(s, 0);\r\n\r\n      // Clear the original child, but not its children.\r\n      c.children.length = 0;\r\n      clear(c);\r\n\r\n      // Return the first modified index.\r\n      return i - 1;\r\n    }\r\n\r\n    // One of the above cases must match.\r\n    throw 'unreachable';\r\n  }\r\n}\r\n","// Copyright (c) Jupyter Development Team.\r\n// Distributed under the terms of the Modified BSD License.\r\n/*-----------------------------------------------------------------------------\r\n| Copyright (c) 2014-2017, PhosphorJS Contributors\r\n|\r\n| Distributed under the terms of the BSD 3-Clause License.\r\n|\r\n| The full license is in the file LICENSE, distributed with this software.\r\n|----------------------------------------------------------------------------*/\r\nimport {\r\n  IIterable, IIterator, IRetroable, IterableOrArrayLike, each\r\n} from '@lumino/algorithm';\r\n\r\n\r\n/**\r\n * A generic doubly-linked list.\r\n */\r\nexport\r\nclass LinkedList<T> implements IIterable<T>, IRetroable<T> {\r\n  /**\r\n   * Construct a new linked list.\r\n   */\r\n  constructor() { }\r\n\r\n  /**\r\n   * Whether the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get isEmpty(): boolean {\r\n    return this._size === 0;\r\n  }\r\n\r\n  /**\r\n   * The size of the list.\r\n   *\r\n   * #### Complexity\r\n   * `O(1)`\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `length`.\r\n   */\r\n  get size(): number {\r\n    return this._size;\r\n  }\r\n\r\n  /**\r\n   * The length of the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `size`.\r\n   *\r\n   * This property is deprecated.\r\n   */\r\n  get length(): number {\r\n    return this._size;\r\n  }\r\n\r\n  /**\r\n   * The first value in the list.\r\n   *\r\n   * This is `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get first(): T | undefined {\r\n    return this._first ? this._first.value : undefined;\r\n  }\r\n\r\n  /**\r\n   * The last value in the list.\r\n   *\r\n   * This is `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get last(): T | undefined {\r\n    return this._last ? this._last.value : undefined;\r\n  }\r\n\r\n  /**\r\n   * The first node in the list.\r\n   *\r\n   * This is `null` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get firstNode(): LinkedList.INode<T> | null {\r\n    return this._first;\r\n  }\r\n\r\n  /**\r\n   * The last node in the list.\r\n   *\r\n   * This is `null` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  get lastNode(): LinkedList.INode<T> | null {\r\n    return this._last;\r\n  }\r\n\r\n  /**\r\n   * Create an iterator over the values in the list.\r\n   *\r\n   * @returns A new iterator starting with the first value.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  iter(): IIterator<T> {\r\n    return new LinkedList.ForwardValueIterator<T>(this._first);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator over the values in the list.\r\n   *\r\n   * @returns A new iterator starting with the last value.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  retro(): IIterator<T> {\r\n    return new LinkedList.RetroValueIterator<T>(this._last);\r\n  }\r\n\r\n  /**\r\n   * Create an iterator over the nodes in the list.\r\n   *\r\n   * @returns A new iterator starting with the first node.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  nodes(): IIterator<LinkedList.INode<T>> {\r\n    return new LinkedList.ForwardNodeIterator<T>(this._first);\r\n  }\r\n\r\n  /**\r\n   * Create a reverse iterator over the nodes in the list.\r\n   *\r\n   * @returns A new iterator starting with the last node.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  retroNodes(): IIterator<LinkedList.INode<T>> {\r\n    return new LinkedList.RetroNodeIterator<T>(this._last);\r\n  }\r\n\r\n  /**\r\n   * Assign new values to the list, replacing all current values.\r\n   *\r\n   * @param values - The values to assign to the list.\r\n   *\r\n   * #### Complexity\r\n   * Linear.\r\n   */\r\n  assign(values: IterableOrArrayLike<T>): void {\r\n    this.clear();\r\n    each(values, value => { this.addLast(value); });\r\n  }\r\n\r\n  /**\r\n   * Add a value to the end of the list.\r\n   *\r\n   * @param value - The value to add to the end of the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `addLast`.\r\n   */\r\n  push(value: T): void {\r\n    this.addLast(value);\r\n  }\r\n\r\n  /**\r\n   * Remove and return the value at the end of the list.\r\n   *\r\n   * @returns The removed value, or `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `removeLast`.\r\n   */\r\n  pop(): T | undefined {\r\n    return this.removeLast();\r\n  }\r\n\r\n  /**\r\n   * Add a value to the beginning of the list.\r\n   *\r\n   * @param value - The value to add to the beginning of the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `addFirst`.\r\n   */\r\n  shift(value: T): void {\r\n    this.addFirst(value);\r\n  }\r\n\r\n  /**\r\n   * Remove and return the value at the beginning of the list.\r\n   *\r\n   * @returns The removed value, or `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * This is equivalent to `removeFirst`.\r\n   */\r\n  unshift(): T | undefined {\r\n    return this.removeFirst();\r\n  }\r\n\r\n  /**\r\n   * Add a value to the beginning of the list.\r\n   *\r\n   * @param value - The value to add to the beginning of the list.\r\n   *\r\n   * @returns The list node which holds the value.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  addFirst(value: T): LinkedList.INode<T> {\r\n    let node = new Private.LinkedListNode<T>(this, value);\r\n    if (!this._first) {\r\n      this._first = node;\r\n      this._last = node;\r\n    } else {\r\n      node.next = this._first;\r\n      this._first.prev = node;\r\n      this._first = node;\r\n    }\r\n    this._size++;\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Add a value to the end of the list.\r\n   *\r\n   * @param value - The value to add to the end of the list.\r\n   *\r\n   * @returns The list node which holds the value.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  addLast(value: T): LinkedList.INode<T> {\r\n    let node = new Private.LinkedListNode<T>(this, value);\r\n    if (!this._last) {\r\n      this._first = node;\r\n      this._last = node;\r\n    } else {\r\n      node.prev = this._last;\r\n      this._last.next = node;\r\n      this._last = node;\r\n    }\r\n    this._size++;\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Insert a value before a specific node in the list.\r\n   *\r\n   * @param value - The value to insert before the reference node.\r\n   *\r\n   * @param ref - The reference node of interest. If this is `null`,\r\n   *   the value will be added to the beginning of the list.\r\n   *\r\n   * @returns The list node which holds the value.\r\n   *\r\n   * #### Notes\r\n   * The reference node must be owned by the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  insertBefore(value: T, ref: LinkedList.INode<T> | null): LinkedList.INode<T> {\r\n    if (!ref || ref === this._first) {\r\n      return this.addFirst(value);\r\n    }\r\n    if (!(ref instanceof Private.LinkedListNode) || ref.list !== this) {\r\n      throw new Error('Reference node is not owned by the list.');\r\n    }\r\n    let node = new Private.LinkedListNode<T>(this, value);\r\n    let _ref = ref as Private.LinkedListNode<T>;\r\n    let prev = _ref.prev!;\r\n    node.next = _ref;\r\n    node.prev = prev;\r\n    _ref.prev = node;\r\n    prev.next = node;\r\n    this._size++;\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Insert a value after a specific node in the list.\r\n   *\r\n   * @param value - The value to insert after the reference node.\r\n   *\r\n   * @param ref - The reference node of interest. If this is `null`,\r\n   *   the value will be added to the end of the list.\r\n   *\r\n   * @returns The list node which holds the value.\r\n   *\r\n   * #### Notes\r\n   * The reference node must be owned by the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  insertAfter(value: T, ref: LinkedList.INode<T> | null): LinkedList.INode<T> {\r\n    if (!ref || ref === this._last) {\r\n      return this.addLast(value);\r\n    }\r\n    if (!(ref instanceof Private.LinkedListNode) || ref.list !== this) {\r\n      throw new Error('Reference node is not owned by the list.');\r\n    }\r\n    let node = new Private.LinkedListNode<T>(this, value);\r\n    let _ref = ref as Private.LinkedListNode<T>;\r\n    let next = _ref.next!;\r\n    node.next = next;\r\n    node.prev = _ref;\r\n    _ref.next = node;\r\n    next.prev = node;\r\n    this._size++;\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   * Remove and return the value at the beginning of the list.\r\n   *\r\n   * @returns The removed value, or `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  removeFirst(): T | undefined {\r\n    let node = this._first;\r\n    if (!node) {\r\n      return undefined;\r\n    }\r\n    if (node === this._last) {\r\n      this._first = null;\r\n      this._last = null;\r\n    } else {\r\n      this._first = node.next;\r\n      this._first!.prev = null;\r\n    }\r\n    node.list = null;\r\n    node.next = null;\r\n    node.prev = null;\r\n    this._size--;\r\n    return node.value;\r\n  }\r\n\r\n  /**\r\n   * Remove and return the value at the end of the list.\r\n   *\r\n   * @returns The removed value, or `undefined` if the list is empty.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   */\r\n  removeLast(): T | undefined {\r\n    let node = this._last;\r\n    if (!node) {\r\n      return undefined;\r\n    }\r\n    if (node === this._first) {\r\n      this._first = null;\r\n      this._last = null;\r\n    } else {\r\n      this._last = node.prev;\r\n      this._last!.next = null;\r\n    }\r\n    node.list = null;\r\n    node.next = null;\r\n    node.prev = null;\r\n    this._size--;\r\n    return node.value;\r\n  }\r\n\r\n  /**\r\n   * Remove a specific node from the list.\r\n   *\r\n   * @param node - The node to remove from the list.\r\n   *\r\n   * #### Complexity\r\n   * Constant.\r\n   *\r\n   * #### Notes\r\n   * The node must be owned by the list.\r\n   */\r\n  removeNode(node: LinkedList.INode<T>): void {\r\n    if (!(node instanceof Private.LinkedListNode) || node.list !== this) {\r\n      throw new Error('Node is not owned by the list.');\r\n    }\r\n    let _node = node as Private.LinkedListNode<T>;\r\n    if (_node === this._first && _node === this._last) {\r\n      this._first = null;\r\n      this._last = null;\r\n    } else if (_node === this._first) {\r\n      this._first = _node.next;\r\n      this._first!.prev = null;\r\n    } else if (_node === this._last) {\r\n      this._last = _node.prev;\r\n      this._last!.next = null;\r\n    } else {\r\n      _node.next!.prev = _node.prev;\r\n      _node.prev!.next = _node.next;\r\n    }\r\n    _node.list = null;\r\n    _node.next = null;\r\n    _node.prev = null;\r\n    this._size--;\r\n  }\r\n\r\n  /**\r\n   * Remove all values from the list.\r\n   *\r\n   * #### Complexity\r\n   * Linear.\r\n   */\r\n  clear(): void {\r\n    let node = this._first;\r\n    while (node) {\r\n      let next = node.next;\r\n      node.list = null;\r\n      node.prev = null;\r\n      node.next = null;\r\n      node = next;\r\n    }\r\n    this._first = null;\r\n    this._last = null;\r\n    this._size = 0;\r\n  }\r\n\r\n  private _first: Private.LinkedListNode<T> | null = null;\r\n  private _last: Private.LinkedListNode<T> | null = null;\r\n  private _size = 0;\r\n}\r\n\r\n\r\n/**\r\n * The namespace for the `LinkedList` class statics.\r\n */\r\nexport\r\nnamespace LinkedList {\r\n  /**\r\n   * An object which represents a node in a linked list.\r\n   *\r\n   * #### Notes\r\n   * User code will not create linked list nodes directly. Nodes\r\n   * are created automatically when values are added to a list.\r\n   */\r\n  export\r\n  interface INode<T> {\r\n    /**\r\n     * The linked list which created and owns the node.\r\n     *\r\n     * This will be `null` when the node is removed from the list.\r\n     */\r\n    readonly list: LinkedList<T> | null;\r\n\r\n    /**\r\n     * The next node in the list.\r\n     *\r\n     * This will be `null` when the node is the last node in the list\r\n     * or when the node is removed from the list.\r\n     */\r\n    readonly next: INode<T> | null;\r\n\r\n    /**\r\n     * The previous node in the list.\r\n     *\r\n     * This will be `null` when the node is the first node in the list\r\n     * or when the node is removed from the list.\r\n     */\r\n    readonly prev: INode<T> | null;\r\n\r\n    /**\r\n     * The user value stored in the node.\r\n     */\r\n    readonly value: T;\r\n  }\r\n\r\n  /**\r\n   * Create a linked list from an iterable of values.\r\n   *\r\n   * @param values - The iterable or array-like object of interest.\r\n   *\r\n   * @returns A new linked list initialized with the given values.\r\n   *\r\n   * #### Complexity\r\n   * Linear.\r\n   */\r\n  export\r\n  function from<T>(values: IterableOrArrayLike<T>): LinkedList<T> {\r\n    let list = new LinkedList<T>();\r\n    list.assign(values);\r\n    return list;\r\n  }\r\n\r\n  /**\r\n   * A forward iterator for values in a linked list.\r\n   */\r\n  export\r\n  class ForwardValueIterator<T> implements IIterator<T> {\r\n    /**\r\n     * Construct a forward value iterator.\r\n     *\r\n     * @param node - The first node in the list.\r\n     */\r\n    constructor(node: INode<T> | null) {\r\n      this._node = node;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<T> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<T> {\r\n      return new ForwardValueIterator<T>(this._node);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): T | undefined {\r\n      if (!this._node) {\r\n        return undefined;\r\n      }\r\n      let node = this._node;\r\n      this._node = node.next;\r\n      return node.value;\r\n    }\r\n\r\n    private _node: INode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * A reverse iterator for values in a linked list.\r\n   */\r\n  export\r\n  class RetroValueIterator<T> implements IIterator<T> {\r\n    /**\r\n     * Construct a retro value iterator.\r\n     *\r\n     * @param node - The last node in the list.\r\n     */\r\n    constructor(node: INode<T> | null) {\r\n      this._node = node;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<T> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<T> {\r\n      return new RetroValueIterator<T>(this._node);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): T | undefined {\r\n      if (!this._node) {\r\n        return undefined;\r\n      }\r\n      let node = this._node;\r\n      this._node = node.prev;\r\n      return node.value;\r\n    }\r\n\r\n    private _node: INode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * A forward iterator for nodes in a linked list.\r\n   */\r\n  export\r\n  class ForwardNodeIterator<T> implements IIterator<INode<T>> {\r\n    /**\r\n     * Construct a forward node iterator.\r\n     *\r\n     * @param node - The first node in the list.\r\n     */\r\n    constructor(node: INode<T> | null) {\r\n      this._node = node;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<INode<T>> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<INode<T>> {\r\n      return new ForwardNodeIterator<T>(this._node);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): INode<T> | undefined {\r\n      if (!this._node) {\r\n        return undefined;\r\n      }\r\n      let node = this._node;\r\n      this._node = node.next;\r\n      return node;\r\n    }\r\n\r\n    private _node: INode<T> | null;\r\n  }\r\n\r\n  /**\r\n   * A reverse iterator for nodes in a linked list.\r\n   */\r\n  export\r\n  class RetroNodeIterator<T> implements IIterator<INode<T>> {\r\n    /**\r\n     * Construct a retro node iterator.\r\n     *\r\n     * @param node - The last node in the list.\r\n     */\r\n    constructor(node: INode<T> | null) {\r\n      this._node = node;\r\n    }\r\n\r\n    /**\r\n     * Get an iterator over the object's values.\r\n     *\r\n     * @returns An iterator which yields the object's values.\r\n     */\r\n    iter(): IIterator<INode<T>> {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Create an independent clone of the iterator.\r\n     *\r\n     * @returns A new independent clone of the iterator.\r\n     */\r\n    clone(): IIterator<INode<T>> {\r\n      return new RetroNodeIterator<T>(this._node);\r\n    }\r\n\r\n    /**\r\n     * Get the next value from the iterator.\r\n     *\r\n     * @returns The next value from the iterator, or `undefined`.\r\n     */\r\n    next(): INode<T> | undefined {\r\n      if (!this._node) {\r\n        return undefined;\r\n      }\r\n      let node = this._node;\r\n      this._node = node.prev;\r\n      return node;\r\n    }\r\n\r\n    private _node: INode<T> | null;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * The namespace for the module implementation details.\r\n */\r\nnamespace Private {\r\n  /**\r\n   * The internal linked list node implementation.\r\n   */\r\n  export\r\n  class LinkedListNode<T> {\r\n    /**\r\n     * The linked list which created and owns the node.\r\n     */\r\n    list: LinkedList<T> | null = null;\r\n\r\n    /**\r\n     * The next node in the list.\r\n     */\r\n    next: LinkedListNode<T> | null = null;\r\n\r\n    /**\r\n     * The previous node in the list.\r\n     */\r\n    prev: LinkedListNode<T> | null = null;\r\n\r\n    /**\r\n     * The user value stored in the node.\r\n     */\r\n    readonly value: T;\r\n\r\n    /**\r\n     * Construct a new linked list node.\r\n     *\r\n     * @param list - The list which owns the node.\r\n     *\r\n     * @param value - The value for the link.\r\n     */\r\n    constructor(list: LinkedList<T>, value: T) {\r\n      this.list = list;\r\n      this.value = value;\r\n    }\r\n  }\r\n}\r\n"],"names":["each","BPlusTree","empty","ArrayExt","Private","LinkedList"],"mappings":"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"}